## UI Regression Tests

| File → Test | Description | Steps |
|---|---|---|
| applicant_edits_a_workflow_used_by_another_applicant.spec.js → Should edit a workflow used by another applicant and only reflects changes to current | Validates workflow isolation - editing one application's workflow does not affect another application using the same template | 1. Admin login; 2. Generate unique names for App1 and App2; 3. Create App1 with 6 applicant types (Affordable Occupant, Affordable Primary, Employed, International, Self-Employed, Other) using Autotest-suite-fin-only workflow, High Risk flags, $500 minimum; 4. Create App2 with identical config; 5. Edit App1 by removing 'Other' applicant type; 6. Verify App2 still has all 6 applicant types (count > App1); 7. Cleanup both applications |
| applicant_type_workflow_affordable_occupant.spec.js → Should complete applicant flow with affordable occupant applicant type | Validates complete applicant flow for Affordable Occupant applicant type from invitation through ID verification | 1. Admin login; 2. Navigate to applications; 3. Find and invite 'AutoTest - Applicant Flow'; 4. Generate session (first_name: 'Affordable', last_name: 'Test', email: 'affordable@verifast.com'); 5. Navigate to applicant view via session link; 6. Handle optional state modal (select US state); 7. Select Affordable Occupant applicant type (#affordable_occupant); 8. Complete applicant form with rent_budget=$555; 9. Complete ID verification using Persona iframe (skip document upload with shouldUpload=false) |
| application_create_delete_test.spec.js → Should create and delete an application with multiple applicant types | Smoke test that validates application creation and deletion flow end-to-end | 1. Navigate to home; 2. Admin login; 3. Create application with unique name (AutoTest Create_Delete_{randomNumber}); 4. Configure with organization='Verifast', 6 applicant types (Affordable Occupant, Affordable Primary, Employed, International, Self-Employed, Other), workflow='Autotest-suite-fin-only', flag_collection='High Risk', minimumAmount=$500; 5. Publish application to LIVE; 6. Delete application; 7. Verify deletion successful |
| application_edit_id_template_settings.spec.js → Should edit an application ID template settings | Validates ability to edit Persona Template ID in workflow identity settings and persistence after save | 1. Admin login; 2. Navigate to applications; 3. Search for 'AutoTest Suite - ID Edit Only'; 4. Open application edit modal; 5. Click submit application setup; 6. Open workflow identity verification setup modal; 7. Capture current persona template ID value; 8. Edit and save with value 'itmpl_tester_Edited'; 9. Wait 5 seconds; 10. Reopen workflow identity setup modal; 11. Verify template ID persisted as 'itmpl_tester_Edited'; 12. Restore original template ID value; 13. Wait 3 seconds for save |
| check_ui_shows_na_for-high_balance.spec.js → Should check UI not shows N/A for high balance accounts | Validates that high balance accounts (≥$500k) display actual values in UI instead of N/A for balances, cash flow, and monthly gross income | 1. Admin login and capture auth token; 2. Navigate to applications page; 3. Find and invite 'AutoTest - Simulation financial employment'; 4. Generate session for user (alexander sample); 5. Open session link in new context; 6. Fill rent_budget=$555 and submit; 7. Upload financial verification using Simulation provider with highBalanceBankStatementData payload (starting balance: $550,000, 5 large transactions); 8. Wait 2 seconds for processing; 9. Click continue on financial verification; 10. Skip employment verification step; 11. Close applicant page and return to admin; 12. Navigate to applicants and search for session by ID; 13. Navigate to session report and click financial section; 14. Verify all balance columns do not contain 'n/a' text; 15. Click transactions radio and verify all transaction balance columns do not contain 'n/a'; 16. Poll Cash Flow card for value (max 10 attempts × 500ms); 17. Verify Cash Flow displays dollar amount (not N/A); 18. Fetch backend income from API GET /sessions/{id}; 19. Poll Monthly Gross Income card for value (max 10 attempts × 500ms); 20. Verify Monthly Gross Income matches backend payload exactly; 21. Cleanup session via API if test passed |
| check_org_member_application_permission_update.spec.js → Admin should be able to update an organization member's application permissions | Validates organization member application permission management (view_applications binding toggle) with proper persistence | 1. Admin login and set locale to English; 2. Navigate to organization menu and click organization self submenu; 3. Verify members tab (users-tab) visible and click it; 4. Wait for members table to be visible; 5. Search for target member email 'test_reviwer@verifast.com' using search bar; 6. Find and click edit button for target member row; 7. Wait for member-role-modal and applications API response; 8. Scroll to last row in all-application-table; 9. Check current state of view_applications checkbox in last row; 10. Toggle checkbox (check if unchecked, uncheck if checked); 11. Wait 200ms for state change; 12. Click save-app-permission-btn and wait for PATCH /organizations/{orgId}/members/{memberId} response; 13. Wait 200ms; 14. Revert change by toggling checkbox back to original state; 15. Click save button again and wait for PATCH response; 16. Verify permission update and revert completed successfully |
| co_app_household_with_flag_errors.spec.js → Should verify co-applicant flag attribution and household status transitions | Validates co-applicant flag attribution, GROUP_MISSING_IDENTITY lifecycle, IDENTITY_NAME_MISMATCH_CRITICAL flag for co-app, and household status transitions (APPROVED ↔ REJECTED) | 1. Admin login and navigate to applications; 2. Find and invite 'Autotest - Household UI test'; 3. Generate session for primary (Primary Applicant); 4. Open session in new context; 5. Select Affordable Primary applicant type; 6. Handle state modal (select US state); 7. Fill rent_budget=$500 and submit; 8. Skip applicants step; 9. Complete primary ID verification via API using Simulation PERSONA_PAYLOAD with matching name (passes); 10. Complete primary financial verification via API using Simulation CUSTOM_PAYLOAD; 11. Click continue on financial step if visible; 12. Complete primary employment verification via API using Simulation VERIDOCS_PAYLOAD; 13. Add additional income source via API (AMI=$500) to prevent GROSS_INCOME_RATIO_EXCEEDED; 14. Navigate to applicants in admin view; 15. Search for session by ID; 16. Click session and open View Details; 17. Poll for INCOME_SOURCE_CADENCE_MISMATCH_ERROR flag (max 60sec, 2sec intervals); 18. Mark INCOME_SOURCE_CADENCE_MISMATCH_ERROR as non-issue; 19. Close details modal; 20. Poll API for approval_status=APPROVED (max 30sec, 2sec intervals); 21. ASSERTION 1 (API): Verify status=APPROVED after flags resolved; 22. ASSERTION 1 (UI): Verify household-status-alert shows 'Meets Criteria'; 23. Navigate to applicants step via 2nd step-APPLICANTS-lg element; 24. Add co-applicant (CoApplicant Household) via fillhouseholdForm; 25. Click continue to invite co-app; 26. Close primary page; 27. Reload admin page and open View Details; 28. ASSERTION 2a: Verify GROUP_MISSING_IDENTITY flag is visible; 29. Close modal; 30. Poll API for approval_status=REJECTED (max 30sec); 31. ASSERTION 2b (API): Verify status=REJECTED (co-app invited but incomplete); 32. ASSERTION 2b (UI): Verify UI shows 'Criteria Not Met'; 33. Extract co-app invite URL from session.data.children; 34. Open co-app link in new context; 35. Select Affordable Primary type for co-app; 36. Update state modal; 37. Complete co-app ID verification via API using PERSONA_PAYLOAD with MISMATCHED name (X Y instead of CoApplicant Household - triggers flag); 38. Wait 3 seconds for flag creation; 39. Close co-app page; 40. Reload admin page and open View Details; 41. ASSERTION 3a: Verify GROUP_MISSING_IDENTITY count=0 (gone after co-app completes ID); 42. ASSERTION 3b: Verify IDENTITY_NAME_MISMATCH_CRITICAL flag is visible; 43. Verify flag text contains 'Identity Name Mismatch (Critical)' and 'Co-Applicant: Coapplicant Household'; 44. Poll API for approval_status=REJECTED (max 30sec); 45. ASSERTION 3c (API): Verify status=REJECTED (due to name mismatch); 46. ASSERTION 3c (UI): Verify UI shows 'Criteria Not Met'; 47. Mark IDENTITY_NAME_MISMATCH_CRITICAL as non-issue; 48. Close modal; 49. Poll API for approval_status=APPROVED (max 60sec, 2sec intervals); 50. ASSERTION 4 (API): Verify status restored to APPROVED after resolving flag; 51. ASSERTION 4 (UI): Verify UI shows 'Meets Criteria' |
| create_multiple_remarks.spec.js → Should allow creating multiple remarks successfully | Validates remark creation, ordering (newest first), hide/show/unhide functionality, and state persistence across modal close/reopen | 1. Navigate to home and admin login; 2. Search for 'Heartbeat Test - Financial' session; 3. Get first session tile and extract sessionID; 4. Navigate to session by ID; 5. Click income-source-section-header; 6. Click first income-source-detail-btn; 7. Click 'Add Remark' button; 8. Fill remark 'R1 - first remark – {ISO_TIMESTAMP}' and submit; 9. Wait 1 second; 10. Click 'Add Remark' button again; 11. Fill remark 'R2 - second remark – {ISO_TIMESTAMP}' and submit; 12. Wait 1 second; 13. Click 'Add Remark' button again; 14. Fill remark 'R3 - third remark – {ISO_TIMESTAMP}' and submit; 15. Wait 1 second; 16. Click 'View Remarks' and wait for GET /income-sources/{id}/comments response; 17. Verify all 3 remarks appear in correct order (R3, R2, R1 - newest first); 18. Verify each remark authored by admin.email; 19. Verify all 3 remarks visible on screen; 20. Verify R2 appears in 2nd position (nth(1)); 21. Click hide-comment-btn on R2 and wait for PATCH response; 22. Wait 200ms; 23. Verify R3 in position 0, R1 in position 1 (R2 hidden); 24. Toggle hidden comments on; 25. Verify R2 now visible again in position 1 (as hidden); 26. Toggle hidden comments off; 27. Verify only R3 and R1 visible; 28. Toggle hidden comments on again; 29. Verify all 3 remarks visible (R3, R2, R1); 30. Click unhide-comment-btn on R2 and wait for PATCH response; 31. Toggle hidden comments off; 32. Verify all 3 remarks still visible (R3, R2, R1); 33. Close income-reviews-modal; 34. Close income-source-details modal |
| frontend_heartbeat.spec.js → Should check frontend heartbeat | Validates main sidebar navigation, header, profile menu, and all menu/submenu titles are accessible | 1. Navigate to home; 2. Admin login and set locale; 3. Verify household-status-alert visible; 4. Execute checkHeaderAndProfileMenu (verify header visible, click user-dropdown-toggle-btn, verify user-profile-dropdown-item and user-logout-dropdown-item visible, click profile, verify 'User Profile' text visible, click applicants-submenu); 5. Execute checkSidebarMenusAndTitles (iterate through all sidebar menus: applicants-menu with 4 submenus, applications-menu with 5 submenus, documents-menu with 2 submenus, transactions-menu with 4 submenus, incomesource-menu with 1 submenu, organization-menu with 2 submenus, organizations-menu no submenus, reports-menu with 4 submenus, users-menu with 3 submenus, address-menu no submenus, tools-menu with 3 submenus, settings-menu with 4 submenus, logout-menu no submenus); 6. For each menu: verify visibility, click (except first), verify submenu visibility and titles match expected test IDs |
| verify_application_edit_id_step_edit.spec.js → Should verify application edit id step edit | Validates application editing workflow including identity verification toggle and financial settings updates with state persistence verification (2 serial tests) | TEST 1 (Edit and Toggle Identity): 1. Admin login and navigate; 2. Navigate to applications menu and submenu via gotoPage; 3. Search for 'AutoTest Suite - ID Edit Only' application; 4. Loop through application table rows to find matching application; 5. Click edit button and wait for GET /applications/{id} and GET /organizations responses; 6. Verify 'Application Setup' heading visible; 7. Click submit-application-setup and wait for PATCH /applications/{id} response; 8. Click workflow-identity-verification button; 9. Verify workflow-identity-modal visible; 10. Check identityRequired checkbox state (expect checked=true initially); 11. Toggle checkbox if needed to uncheck it; 12. Verify checkbox is now unchecked; 13. Click submit-identity-setup-form and wait for PATCH /applications/{id}/steps/{id} response; 14. Click submit-app-workflow-edit-form; 15. Verify application-income-ratio-guarantor field has value '1000'; 16. Fill guarantor field with '1500'; 17. Fill incomeBudget with '1'; 18. Fill rentBudgetMin with '500'; 19. Click submit-application-setting-modal and wait for PATCH /applications/{id} response AND GET /applications list refresh (auto-publish in edit mode); 20. Wait 2 seconds for UI to reflect changes. TEST 2 (Verify Updates Persist): 1. Admin login and navigate; 2. Navigate to 'AutoTest Suite - ID Edit Only' application edit; 3. Click submit-application-setup; 4. Click workflow-identity-verification; 5. Check identityRequired checkbox state (expect checked=false from previous test - verifies persistence); 6. Toggle checkbox if needed to check it; 7. Verify checkbox is now checked; 8. Submit identity setup form; 9. Verify guarantor field has value '1500' (from previous test - verifies persistence); 10. Fill guarantor field with '1000' (revert to original); 11. Fill incomeBudget with '1'; 12. Fill rentBudgetMin with '500'; 13. Submit application settings and wait for auto-publish |
| org_member_application_binding_scoping_check.spec.js → Check Application Binding Scoping (Inbox Visibility) | Validates that organization member sees sessions filtered by view_applications bindings when view_sessions permission is granted | 1. Admin login and navigate; 2. Verify household-status-alert visible; 3. Click organizations-menu; 4. Verify organizations-heading visible; 5. Wait 2 seconds; 6. Search for organization 'Permissions Test Org' and wait for GET /organizations response; 7. Find exact match for organization name in orgList; 8. Extract organization ID and click organization link; 9. Verify users-tab visible and click it; 10. Click create-org-member-btn; 11. Fill email with random generated email; 12. Select 'empty role v2' role; 13. Click submit-create-member; 14. Click copy-invitation-link; 15. Extract invitation URL from page text; 16. Close modal; 17. Open invitation URL in new browser context; 18. Wait 2 seconds; 19. Fill registration form (First Name: Test, Last Name: User, Password: password, Confirm Password: password); 20. Check terms checkbox; 21. Click Register button; 22. Login with new user credentials; 23. Wait for user-dropdown-toggle-btn visible; 24. Verify applicants-menu NOT visible (no permissions yet); 25. Return to admin page and search for member by email; 26. Click edit button for member; 27. Track user for cleanup via cleanupHelper; 28. Search permissions for 'view sessions' and check View Sessions permission; 29. Click Save Permissions button; 30. Reload member page and wait 3 seconds; 31. Hover sidebar and click sidebar-action to expand; 32. Click applicants-menu; 33. Click applicants-submenu and wait for GET /sessions and GET /organizations/self responses; 34. Extract user's organization ID from /organizations/self response; 35. Verify userOrgId matches expectedOrgId; 36. Extract API limit and sessions count from response; 37. Count session cards in side-panel; 38. Verify sideItemsCount equals min(apiLimit, apiReturnedCount) - user sees ALL org sessions; 39. Search for 'Test App P1' application in admin; 40. Check view_applications binding for firstAppName; 41. Click save-app-permission-btn; 42. Reload member page and wait for GET /sessions response; 43. Wait 3 seconds; 44. Count session cards again; 45. Verify sessions.count > 0 after App1 binding; 46. Click first session card; 47. Loop through all visible sessions and verify each contains firstAppName text; 48. Verify all sessions belong to Test App P1; 49. Extract badge count from All tab; 50. Search for 'Test App P2' and check binding; 51. Click save-app-permission-btn; 52. Reload and wait for GET /sessions response; 53. Try to click new-session-btn (optional); 54. Verify All tab badge shows '2'; 55. Count session cards; 56. Verify count > 0; 57. Click first session; 58. Loop through all sessions and verify each contains firstAppName OR secondAppName; 59. Verify all sessions belong to Test App P1 OR Test App P2; 60. Cleanup tracked user via afterAll hook |
| pdf_download_test.spec.js → Should successfully export PDF for an application | Validates PDF export functionality for a session by searching for hardcoded application and downloading PDF | 1. Navigate to home; 2. Admin login as staff user; 3. Submit login and set locale; 4. Verify applicants-menu visible; 5. Search for 'autotest PDF Download' session; 6. Verify search results exist (sessions.length > 0); 7. Extract sessionId from first result; 8. Navigate to session by ID; 9. Wait 1 second for page load; 10. Export PDF using checkExportPdf utility (clicks session-action-btn, clicks export-pdf-btn, waits for download event, verifies PDF file created in new tab with correct filename pattern) |
| property_admin_permission_test.spec.js → Verify property admin user permissions | Validates property admin user creation via API and comprehensive permission checks across applications, workflows, approvals, organizations, and members (serial suite: 3 tests) | TEST 1: Create user via API with 'Autotest - Property Admin' role. TEST 2: Login as property admin, verify applications list/edit/delete permissions, verify workflows edit returns 403, verify approval conditions view (no edit), edit organization city, create/delete organization members, verify roles table. TEST 3: Login as property admin, search for 'Prop Admin Test App' session, verify flags section (checkIssueButtonPresent=false), verify events/activity, check rent budget edit, session approve/reject, export PDF, request additional documents, invite applicant, upload documents, merge session, check identity/income/employment/files/financial sections. Cleanup user on test pass |
| staff_user_permissions_test.spec.js → Should create member record and assign it to the Staff role | Validates staff user creation via API and permission checks (serial suite: 2 tests) | TEST 1: Authenticate as admin, fetch 'Autotest - Staff' role, create staff user via API, track for cleanup. TEST 2: Login as staff user, verify applications menu visible with NO edit icons, search for hardcoded session (dev/staging), verify flags section (checkIssueButtonPresent=true - staff CAN mark issues), export PDF, verify identity section (show-images/more-details NOT visible), verify income sources (detail/delist buttons disabled), verify employment/files sections. Cleanup user on last test |
| user_flags_approve_reject_test.spec.js → Session Flag and Session Approve/Reject | Validates flag management (mark as issue/non-issue) and session approval/rejection workflow (2 serial suites) | SUITE 1 (Session Flag): Create session with VERIDOCS simulator, navigate to flags, mark NO_INCOME_SOURCES_DETECTED as issue, verify moved to decline section, mark MISSING_TRANSACTIONS as non-issue, verify moved to reviewed section. SUITE 2 (Approve/Reject): Create session, verify 'Unreviewed' status, approve documents via files section, mark all flags in items-requiring-review as issues, wait for status to NOT contain 'Requires Review', proceed with approve/reject flow |
| user_permissions_verify.spec.js → Should allow admin to create user via API | Validates user creation via API with 'Autotest - Centralized Leasing' role and comprehensive permission checks (serial suite: 3 tests) | TEST 1: Create user via API, track for cleanup. TEST 2: Login as user, navigate to applications, verify edit button visible, click edit, verify URL changes to /application/{id}/edit, verify application_name input not empty, cancel. TEST 3: Login as user, verify applicants menu/submenus visible, search for hardcoded session (dev/staging), verify can view flags, edit rent budget, approve/reject session, export PDF, request documents, invite applicant, upload documents, merge session, delete applicant, check all report sections (identity/income/employment/files/financial). Cleanup user on last test |
| request_additional_information.spec.js → Document Request: Complete validation (happy path + negative tests) | Validates request additional information flow (happy path), network/API validation, events audit trail, step state safety, and negative handling (disabled submit, 500 error toast) | 1. Authenticate data manager; 2. Admin login and capture token; 3. Invite 'AutoTest - Request Doc UI test'; 4. Generate session and track for cleanup; 5. Open applicant in new context; 6. Handle state modal; 7. Complete rent budget; 8. Skip Applicants; 9. Authenticate guest from invite; 10. Complete ID via API (Simulation); 11. Skip Financial; 12. Verify Employment step visible; 13. Capture baseline current_step (GET /sessions/{id}); 14. Open report for session; 15. Open Request Additional Information, select Pay Stub Upload, submit; 16. Assert POST /invitations payload (employment_document, documents includes pay_stub) and 201 response; 17. GET /invitations/{id} asserts persisted; 18. GET /sessions/{id} includes action EMPLOYMENT_DOCUMENT (REQUESTED); 19. GET /sessions/{id}/events includes session.information_requested and action.requested; 20. Verify events in UI via view-details; 21. Assert current_step unchanged vs baseline; 22. Applicant: complete employment via API without auto-complete, assert employment-step-continue enabled and clickable; 23. Negative: submit disabled without selection; 24. Negative: intercept POST /invitations with 500 and assert error alert |


## UI Regression and External-Integration Tests

| File → Test | Description | Steps |
|---|---|---|
| application_flow_with_id_only.spec.js → ID only - 1 attempt - success | Complete applicant flow with ID verification only (no financial or employment) using Persona integration | 1. Admin login; 2. Navigate to applications page; 3. Search for 'AutoTest Suite - ID Only'; 4. Click invite link; 5. Generate session with default user data; 6. Open session link in new browser context; 7. Fill rent_budget=$500 and submit initial form; 8. Start ID verification and wait for identity-verifications POST response; 9. Interact with Persona iframe (withpersona.com): click basic button, click 'Begin Verifying' primary button; 10. Click 'Select' button to choose document type; 11. Select passport option (#select__option--pp); 12. Upload passport.jpg file via file-upload input; 13. Click use-image button; 14. Wait 3 seconds; 15. Click primary button to continue; 16. Verify Summary page appears within 110 seconds |
| application_step_should_skip_properly.spec.js → Check Application step skip works properly | Comprehensive test validating skip functionality across all workflow steps and ability to revisit/complete skipped steps | 1. Admin login and navigate to applications; 2. Find and invite 'AutoTest Suite - Full Test'; 3. Generate session for user (Playwright Skip); 4. Logout admin; 5. Open applicant session link; 6. Select 'Employed' applicant type; 7. Update state modal to ALABAMA; 8. Fill rent_budget=$500; 9. Skip Applicants invite step; 10. Complete ID verification via Persona camera-based flow (identityStep); 11. Complete Plaid financial step using Betterment bank (username: custom_coffee, password: custom_gig) and wait for connection completion; 12. Skip Employment step; 13. Verify Summary page visible; 14. Navigate back to Applicants step (shows 'Skipped' status); 15. Skip again and return to Summary; 16. Navigate to Employment step (shows 'Skipped' status); 17. Skip again and return to Summary; 18. Navigate to Rent Budget step (shows 'Completed' status); 19. Update rent_budget to $1000 and return to Summary; 20. Navigate back to Applicants step; 21. Add co-applicant (Playwright Skip Coapp) via fillhouseholdForm; 22. Complete Applicants step via continue button; 23. Wait 3 seconds and verify Summary; 24. Navigate to Employment step (still 'Skipped'); 25. Complete Paychex paystub connection via Atomic iframe (username: test-good); 26. Complete Employment step via continue button; 27. Verify final Summary page visible |
| check_coapp_income_ratio_exceede_flag.spec.js → Should confirm co-applicant income is considered when generating/removing Gross Income Ratio Exceeded flag | Validates that co-applicant income correctly impacts GROSS_INCOME_RATIO_EXCEEDED flag (appears when ratio >30%, disappears when ≤30% after co-app completes) | 1. Admin login and navigate to applications; 2. Find and invite 'AutoTest Suite - Full Test'; 3. Generate session and extract link; 4. Open session in new browser context with camera permissions; 5. Select 'Employed' applicant type; 6. Update state modal to ALABAMA; 7. Fill rent_budget=$1500; 8. Add co-applicant (Playwright CoApp) via applicant step; 9. Complete primary ID verification via Persona camera flow (identityStep); 10. Complete primary Plaid financial connection (Betterment bank); 11. Wait for Plaid connection completion; 12. Complete primary Paychex paystub connection; 13. Complete employment step; 14. Close applicant page; 15. Navigate to applicants and search for session; 16. Click session and capture response data; 17. Verify session has co-applicant (children.length > 0, role=APPLICANT); 18. Extract and verify rent budget, monthly income, and rent/income ratio from session summary; 19. Calculate ratio and verify >30% threshold (flag should be present); 20. Click view-details-btn and verify GROSS_INCOME_RATIO_EXCEEDED flag visible; 21. Close modal; 22. Open session actions and click invite-applicant; 23. Click reinvite for co-applicant and copy invite link via clipboard; 24. Close invite modal; 25. Open co-applicant link in new context with camera permissions; 26. Select 'Other' applicant type for co-app; 27. Complete co-app ID verification (identityStep); 28. Complete co-app Plaid financial (Betterment, user_bank_income, empty password); 29. Wait for connection completion; 30. Complete co-app Paychex paystub connection; 31. Complete co-app employment step; 32. Close co-app page; 33. Reload admin page and search session again; 34. Verify monthly income increased (new income > initial income); 35. Extract new rent/income ratio; 36. Poll and retry up to 5 times (5sec intervals, max 25sec) until calculated ratio ≤30%; 37. Verify calculated ratio ≤30% threshold (flag should be removed); 38. Click view-details-btn and verify GROSS_INCOME_RATIO_EXCEEDED flag count=0; 39. Close modal |
| employment_skip_household_not_hidden_employment_connect.spec.js → Should skip household setup and connect to employment | Validates employment connection flow while skipping household/applicants step and verifies employment step is not hidden | 1. Admin login and navigate to applications; 2. Navigate to applications page; 3. Find and invite 'AutoTest Suite - EMP Connect'; 4. Fill and submit session form (user: alexander sample); 5. Copy session invite link; 6. Open invite link in new browser context; 7. Handle optional state modal (select US state); 8. Fill rent_budget=$555 and submit; 9. Verify Employment Verification step visible (step not hidden despite household skip); 10. Click document-pay_stub; 11. Click directly-connect-emp-btn; 12. Wait for Atomic iframe (#atomic-transact-iframe) to load; 13. Complete Walmart Pay Stub employment verification via employmentVerificationWalmartPayStub helper (Atomic iframe flow: click continue, search and select Walmart, fill username test-good, click continue, fill password dfdsfsff, click continue, select Homeoffice radio option, click continue); 14. Verify Summary page appears within 60 seconds; 15. Close applicant page |
| frontend-session-heartbeat.spec.js → Verify Frontend session heartbeat | Validates complete session flow with co-applicant, skip functionality, manual upload UI flows, Atomic paystub connection, and income source counter display with retry logic | 1. Admin login and navigate to applications; 2. Find and invite 'Autotest - Application Heartbeat (Frontend)'; 3. Generate session for Playwright Heartbeat user; 4. Logout admin; 5. Open session invite link; 6. Select 'Employed' applicant type; 7. Wait 3 seconds and handle state modal (ALABAMA); 8. Fill rent_budget=$500; 9. Skip applicants invite step; 10. Verify start-id-verification visible; 11. Wait 4 seconds; 12. Navigate to Applicants step (shows 'Skipped'); 13. Add co-applicant (PWCoapp Heartbeat) via fillhouseholdForm; 14. Wait for applicant-invite-continue-btn to be enabled OR auto-advance to start-id-verification (via waitForButtonOrAutoAdvance); 15. Verify start-id-verification visible; 16. Click start-manual-upload-id-verification; 17. Verify manual upload modal; 18. Click cancel-manual-upload-btn; 19. Skip ID verification; 20. Verify connect-bank visible (Financial step); 21. Click financial-upload-statement-btn; 22. Verify cancel-manual-upload-btn visible; 23. Cancel manual upload; 24. Verify connect-bank visible again; 25. Skip financial step; 26. Verify document-pay_stub visible (Employment step); 27. Complete Paychex paystub connection via Atomic iframe; 28. Wait for employment-step-continue to be enabled OR auto-advance to summary (via waitForButtonOrAutoAdvance); 29. Verify summary-completed-section visible; 30. Logout guest via profile-dropdown-btn and logout-dropdown-btn; 31. Verify get-started-btn visible; 32. Navigate to home and login as admin; 33. Search for session by sessionId; 34. Find session locator and click it; 35. Wait for GET /sessions/{id} response; 36. Poll for income sources counter > 0 (max 5 attempts: scroll container to bottom, wait 3sec for lazy load, read SVG counter text, reload if counter=0); 37. Click income-source-section-header and wait for GET /income-sources response; 38. Verify income sources count > 0; 39. Verify each income source visible by test ID; 40. Close page |
| financial_mx_2_attempts_success_and_failed_password.spec.js → Financial - mx - 2 attempts + Eligibility status transitions | Validates MX bank connection with 2 attempts (1 success OAuth + 1 failed credentials), iframe stuck handling with reload fallback, and eligibility status transitions based on rent/income changes | 1. Navigate to home; 2. Admin login and set locale; 3. Navigate to applications page; 4. Search for 'AutoTest - Financial Only, MX and Plaid'; 5. Verify application name and click invite link; 6. Generate session for FinMX Test user; 7. Copy session invite link; 8. Open link in new browser context; 9. Fill rent_budget=$500 and submit; 10. Click connect-bank and wait for POST /financial-verifications response; 11. Interact with MX iframe (int-widgets.moneydesktop.com): search for 'mx bank oau', click MX-Bank-(OAuth)-row; 12. Click continue button and wait for OAuth popup; 13. Wait for OAuth page DOM load and 3 seconds; 14. Click Authorize button on OAuth page; 15. Wait up to 7 seconds for OAuth page auto-close; 16. Poll for MX connection completion (max 80 attempts × 2sec = 160sec): check if iframe closed automatically OR done button visible; 17. If done button found - click it; 18. If polling timeout - reload page and poll financial-row-status for 'Completed' text (max 10 attempts × 2sec = 20sec); 19. If connection complete via reload - treat as auto-closed and re-open iframe by clicking connect-bank; 20. Wait 2 seconds; 21. Search for 'mx bank' (non-OAuth) in MX iframe; 22. Click MX-Bank-row; 23. Fill LOGIN with 'fail_user' and PASSWORD with 'fail_password'; 24. Click credentials-continue; 25. Wait for credentials-error-message-box to appear (max 150sec); 26. Click connnect-modal-cancel to close iframe; 27. Click financial-verification-continue-btn; 28. Verify Summary page visible within 110 seconds; 29. Close applicant page and navigate to admin report; 30. Wait 5 seconds for income source generation; 31. Verify household-status-alert shows 'Meets Criteria' (MX income sufficient for $500 rent); 32. Click rent-budget-edit-btn; 33. Fill rent-budget-input with $3000 and submit; 34. Wait 2 seconds and reload page; 35. Poll for 'Criteria Not Met' status (max 15 attempts × 2sec, reload every 3 attempts); 36. Click income-source-section-header; 37. Click income-source-add and select income_type='OTHER'; 38. Uncheck 'Calculate average from transactions' checkbox; 39. Fill net_amount with $3000; 40. Click Save and wait for POST /income-sources response; 41. Wait 5 seconds for sync; 42. Verify income source visible on page; 43. Reload and verify household-status-alert shows 'Meets Criteria' (total income now sufficient for $3000 rent) |
| financial_plaid_one_transaction_error_decline.spec.js → Should handle Plaid Fin verification with insufficient transactions and decline flag | Validates Plaid financial connection with single transaction (insufficient), verifies user error status, and GROSS_INCOME_RATIO_EXCEEDED flag generation | 1. Navigate to https://dev.verifast.app/; 2. Admin login and set locale; 3. Navigate to applications menu and submenu; 4. Generate random name for user; 5. Generate session for 'AutoTest - Financial Only, MX and Plaid' with random user data; 6. Complete applicant initial setup (navigate to link, handle state modal, fill rent_budget=$555); 7. Complete Plaid financial connection via plaidFinancialConnect helper (click Alternate Connect Bank, Plaid iframe flow: continue as guest, select Regions Bank, fill username custom_onetxn, fill password test, submit, continue, finish without saving); 8. Wait for connection status 'Complete' (max 100sec); 9. Click financial-verification-continue-btn; 10. Verify Summary page visible; 11. Navigate to dashboard; 12. Navigate to applicants; 13. Search for session by random name; 14. Click first session; 15. Verify 'User Error' link exists with decoration-error class and click it; 16. Verify financial-row-sub-title shows '1 account | 1 transaction'; 17. Close financial status modal; 18. Click 'View Details' button; 19. Verify 'Gross Income Ratio Exceeded' flag present in application details |
| hosted_app_copy_verify_flow_plaid_id_emp_skip.spec.js → Should complete hosted application flow with id emp skips and Plaid integration | Validates hosted application flow (phone OTP login), registration, and Plaid financial connection with employment skip | 1. Admin login and navigate to applications; 2. Navigate to applications page; 3. Find and copy 'AutoTest Suite Hshld-ID-Emp-Fin with skips' application URL via clipboard; 4. Logout admin; 5. Navigate to copied application URL; 6. Generate random phone number (613292XXXX); 7. Fill phone-input and click get-started-btn; 8. Fill 6-digit verification code (123456) in separate input fields; 9. Submit code; 10. Complete applicant registration form (firstName: teset, lastName: testrelogin, state: ALASKA, check terms); 11. Wait for rent_budget input (max 16sec); 12. Fill rent_budget=$500 and submit; 13. Skip applicants step; 14. Complete ID verification using Persona iframe with passport.jpg upload (shouldUpload=true); 15. Skip employment verification; 16. Complete Plaid financial connection via plaidFinancialConnect (Regions Bank, username: custom_onetxn, password: test); 17. Verify Summary page visible; 18. Verify Rent Budget status shows 'Complete'; 19. Verify Identity Verification status shows 'Complete'; 20. Verify Applicants status shows 'Skipped'; 21. Verify Employment Verification status shows 'Skipped'; 22. Verify 'Missing Financial Transactions' error visible |
| co_applicant_effect_on_session_test.spec.js → Should complete applicant flow with co-applicant effect on session | Validates that co-applicant completion affects household summary (monthly income and rent ratio changes) and verifies co-applicant income sources, employments, and financial data appear in admin report | 1. Admin login and navigate to applications; 2. Find and invite 'AutoTest Suite - Full Test'; 3. Generate session for primary user (Playwright User); 4. Open session link in new context; 5. Select Affordable Primary applicant type; 6. Handle optional state modal (select US state); 7. Fill rent_budget=$500 and submit; 8. Add co-applicant (Playwright CoApp) via fillhouseholdForm; 9. Click continue to invite co-applicant; 10. Skip primary ID verification; 11. Complete primary Plaid financial (Betterment, username: custom_gig, password: test); 12. Wait for Plaid connection completion; 13. Complete primary Paychex paystub connection; 14. Complete primary employment step; 15. Close primary applicant page; 16. Navigate to applicants in admin view; 17. Search for session and click it; 18. Capture initial session data: verify children.length > 0 and role=APPLICANT; 19. Store initial monthly_income and rent_ratio; 20. Open session actions and reinvite co-applicant; 21. Copy co-applicant invite link via clipboard; 22. Close invite modal; 23. Open co-applicant link in new context; 24. Select Affordable Primary type for co-app; 25. Handle optional state modal; 26. Skip co-app ID verification; 27. Complete co-app Plaid financial (Betterment, username: user_bank_income, password: empty string); 28. Wait for Plaid completion; 29. Complete co-app Paychex paystub connection; 30. Complete co-app employment step; 31. Close co-app page; 32. Reload admin page and wait for session and financial-verifications responses; 33. Search for session again; 34. Verify new monthly_income ≠ initial monthly_income; 35. Verify new rent_ratio ≠ initial rent_ratio; 36. Click income-source-section-header and wait for income-sources responses for all household members; 37. Verify each applicant has at least 1 income source; 38. Click employment-section and verify each applicant has at least 1 employment record; 39. Verify financial section data displays correctly for all household members via checkFinancialSectionData |
| skip_button_visibility_logic.spec.js → Should verify skip button visibility logic | Validates skip button visibility logic across all workflow steps (Applicants, ID, Financial, Employment): visible before action, disappears after completing action, continue button appears | 1. Admin login and navigate; 2. Find 'Autotest - Full flow skip button test' and invite; 3. Generate session (email: playwright+skipbutton@verifications.com); 4. Open applicant in new context with camera perms; 5. Select Affordable Occupant; 6. Handle state modal; 7. Verify rent budget input visible and complete step; 8. Applicants: verify skip visible → fill household form → skip hidden → continue; 9. Identity: verify skip visible → complete identity (camera flow) → skip hidden → continue; 10. Financial: verify skip visible → complete Plaid Betterment → skip hidden → continue; 11. Employment: verify skip visible → complete Paychex paystub → skip hidden → continue; 12. Verify Summary shows all steps Complete |

## UI Critical Tests


| File → Test | Description | Steps |
|---|---|---|
| frontend_heartbeat.spec.js → Should test session actions and section dropdowns | Critical smoke test validating session action dropdown buttons (approve, reject, invite, upload, etc.) and all section headers toggle correctly | 1. Navigate to home; 2. Admin login and set locale; 3. Verify household-status-alert visible; 4. Check if applicants-menu is open (has sidebar-item-open class); 5. Click applicants-menu if not open; 6. Click applicants-submenu; 7. Search for sessions with 'Autotest Suite - Full Test' application; 8. Verify sessions.length > 0; 9. Extract first sessionId; 10. Navigate to session by ID; 11. Verify household-status-alert visible; 12. Click session-action-btn; 13. Verify all action dropdown buttons visible and enabled: approve-session-btn, reject-session-btn, invite-applicant, trigger-pms-upload-btn, upload-document-btn, request-additional-btn, income-source-automation-dropdown-item; 14. Click view-details-btn; 15. Verify report-view-details-flags-section visible; 16. Close modal via close-event-history-modal; 17. Test all section headers toggle open/closed: identity-section-header, income-source-section-header, files-section-header, employment-section-header, financial-section-header, integration-logs-section-header; 18. For each header: click to open, verify arrow has -rotate-90 class, verify section content visible, click to close, verify arrow has rotate-90 class |
| heartbeat_addresses_menus.spec.js → Should check Address heartbeat | Critical heartbeat test validating address menu navigation | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Click address-menu; 5. Wait 1 second; 6. Verify coming soon page displayed |
| heartbeat_applicant_inbox_menus.spec.js → Should check Applicant Inbox heartbeat | Critical heartbeat test validating all applicant inbox submenu filters and session card display | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if applicants-menu is expanded (has sidebar-item-open class); 5. Click applicants-menu if not expanded; 6. Check if applicants-submenu is active (has sidebar-active class); 7. If not active: click applicants-submenu and wait for GET /sessions response (filters should NOT include approval_status); 8. If already active: reload page and wait for GET /sessions response (filters should NOT include approval_status); 9. Verify all session cards visible for returned sessions (application-card with data-session attribute); 10. Click approval-status-submenu if visible and wait for GET /sessions response (filters should include "awaiting_review"); 11. Verify all awaiting review session cards visible; 12. Click reviewed-submenu if visible and wait for GET /sessions response (filters should include "approved" and "conditionally_approved"); 13. Verify all reviewed session cards visible; 14. Click rejected-submenu if visible and wait for GET /sessions response (filters should include "rejected"); 15. Verify all rejected session cards visible |
| heartbeat_applications_menus.spec.js → Should check Applications menu heartbeat | Critical heartbeat test validating all applications menu submenus load data and display correctly | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if applications-menu is expanded (has sidebar-item-open class); 5. Click applications-menu if not expanded; 6. Check if applications-submenu is active (has sidebar-active class); 7. If not active: click applications-submenu and wait for GET /applications response; 8. If already active: reload page and wait for GET /applications response; 9. If applications.data.length > 0: verify each application row in application-table contains correct application name from API data; 10. Click portfolios-submenu if visible and wait for GET /portfolios response; 11. If portfolios.data.length > 0: verify each portfolio row contains correct portfolio data; 12. Click workflows-submenu if visible and wait for GET /workflows response; 13. If workflows.data.length > 0: verify each workflow row in workflow-table contains kebab-to-title-case converted workflow name; 14. Click affordable-templates-submenu if visible and wait for GET /eligibility-templates response; 15. If templates.data.length > 0: verify each template row in eligibility-template-table contains template name; 16. Click approval-conditions-submenu if visible and wait for GET /flag-collections response; 17. If approvalConditions.data.length > 0: verify each approval condition row in approval-conditions-table contains flag collection name |
| heartbeat_documents_menus.test.js → Should check Documents menu heartbeat | Critical heartbeat test validating documents menu navigation and document policies submenu | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if documents-menu is expanded (has sidebar-item-open class); 5. Click documents-menu if not expanded; 6. Check if documents-submenu is active (has sidebar-active class); 7. Click documents-submenu (coming soon page appears - no further validation); 8. Click document-policies-submenu if visible and wait for GET /document-policies response; 9. If documentPolicies.data.length > 0: verify each document policy row contains policy name from API data |
| heartbeat_income_source_menus.spec.js → Should check Income Sources menu heartbeat | Critical heartbeat test validating income source configuration submenu loads templates and displays correctly | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if incomesource-menu is expanded (has sidebar-item-open class); 5. Click incomesource-menu if not expanded; 6. Check if incomesource-configuration-submenu is active (has sidebar-active class); 7. Navigate to submenu via navigateToSubMenu helper (waits for API idle, clicks or reloads, waits for GET /income-source-templates request, waits for response); 8. If incomeSources.data.length > 0: verify table rows count matches API data count; 9. Create set of expected names from API for order-independent validation; 10. Loop through each UI row and verify row text contains at least one API name; 11. Verify all UI rows match API data (order-independent) |
| heartbeat_logout_menu.spec.js → Should check Logout flow heartbeat | Critical heartbeat test validating logout functionality and login page display | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Click logout-menu; 5. Verify 'Welcome' heading visible; 6. Verify 'Email Address' textbox visible; 7. Verify 'Password' textbox visible; 8. Verify admin-login-btn visible; 9. Reload page; 10. Verify 'Welcome' heading still visible; 11. Verify 'Email Address' textbox still visible; 12. Verify 'Password' textbox still visible; 13. Verify admin-login-btn still visible |
| heartbeat_org_list_menus.spec.js → Should check Organization List menu heartbeat | Critical heartbeat test validating organizations list menu loads and displays correctly | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if organizations-menu is active (has sidebar-active class); 5. Navigate to organizations-menu via navigateToSubMenu helper (waits for API idle, clicks or reloads, waits for GET /organizations request, waits for response); 6. Verify list content via verifyListContent helper (if organization.data.length > 0: loop through each organization and verify table row contains organization name) |
| heartbeat_organizations_menus.spec.js → Should check Organizations menu heartbeat | Critical heartbeat test validating organization self page and members submenu | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if organization-menu is expanded (has sidebar-item-open class); 5. Click organization-menu if not expanded; 6. Check if organization-self-submenu is active (has sidebar-active class); 7. If not active: click organization-self-submenu and wait for GET /organizations/self response; 8. If already active: reload page and wait for GET /organizations/self response; 9. If organization.data exists: verify heading with organization.data.name is defined; 10. Click members-submenu if visible and wait for GET /organizations/{id}/members response; 11. If members.data.length > 0: verify each member row in members-table contains user.full_name from API data |
| heartbeat_reports_menus.spec.js → Should check Report menu heartbeat | Critical heartbeat test validating all reports menu submenus load data correctly | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if reports-menu is expanded (has sidebar-item-open class); 5. Click reports-menu if not expanded; 6. Check if report-sessions-menu is active (has sidebar-active class); 7. Navigate to report-sessions-menu via navigateToSubMenu helper and wait for GET /sessions response; 8. Verify list content via verifyListContent (verify each row contains application.name from API); 9. Navigate to report-verifications-menu via navigateToSubMenu and wait for GET /verifications response; 10. Verify list content (verify each row contains verification type); 11. Navigate to report-files-menu via navigateToSubMenu and wait for GET /documents response; 12. Verify list content (verify each row contains type.name); 13. Navigate to report-income-sources-menu via navigateToSubMenu and wait for GET /income-sources response; 14. Verify list content (verify each row contains description) |
| heartbeat_settings_menus.spec.js → Should check Settings menu heartbeat | Critical heartbeat test validating settings menu submenus (account, devices, notifications, 2FA) | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if settings-menu is expanded (has sidebar-item-open class); 5. Click settings-menu if not expanded; 6. Click account-setting-submenu; 7. Navigate to devices-setting-submenu via navigateToSubMenu and wait for GET /devices response; 8. Verify list content via verifyListContent (verify each device row contains device name); 9. Click notification-setting-submenu (notification page not integrated - no validation); 10. Click 2fa-setting-submenu; 11. Verify 'Two-factor authentication' heading visible; 12. Verify 'Additional Password Protection' heading visible; 13. Verify 'Change Password' button visible |
| heartbeat_tools_menus.spec.js → Should check Tools menu heartbeat | Critical heartbeat test validating tools menu submenus (document tester, name tester, integrations, test setup) | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if tools-menu is expanded (has sidebar-item-open class); 5. Click tools-menu if not expanded; 6. Click document-tester-submenu; 7. Verify document-tester-heading is defined; 8. Verify 'Document Policy' text is defined; 9. Verify 'Upload Test File' text is defined; 10. Verify filepond drop label is defined; 11. Click name-tester-submenu; 12. Verify 'Name 1' text visible; 13. Verify 'Name 2' text visible; 14. Verify 'Submit' button visible; 15. Click integrations-submenu; 16. Verify 'New Customer' button visible; 17. Verify 'Sandbox Customers' button visible; 18. Click test-setup-submenu; 19. Verify 'Test Setup Page' heading visible |
| heartbeat_transactions_menus.spec.js → Should check Transactions menu heartbeat | Critical heartbeat test validating all transactions menu submenus load data correctly | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if transactions-menu is expanded (has sidebar-item-open class); 5. Click transactions-menu if not expanded; 6. Check if transaction-tags-submenu is active (has sidebar-active class); 7. Navigate to transaction-tags-submenu via navigateToSubMenu helper and wait for GET /tags response; 8. Verify list content via verifyListContent (verify each row contains tag name); 9. Navigate to keyword-mapping-submenu via navigateToSubMenu and wait for GET /keywords response; 10. Verify list content (verify each row contains keyword); 11. Navigate to blacklists-submenu via navigateToSubMenu and wait for GET /income-source-blacklist-rules response; 12. Verify list content (verify each row contains provider.name); 13. Navigate to provider-mapping-submenu via navigateToSubMenu and wait for GET /categories response; 14. Verify list content (verify each row contains category name) |
| heartbeat_users_menu.spec.js → Should check User menu heartbeat | Critical heartbeat test validating users menu submenus load data correctly | 1. Admin login and navigate; 2. Check if users-menu is expanded (has sidebar-item-open class); 3. Click users-menu if not expanded; 4. Check if users-submenu is active (has sidebar-active class); 5. Navigate to users-submenu via navigateToSubMenu helper and wait for GET /users response; 6. Verify list content via verifyListContent (verify each row contains user email); 7. Verify roles-submenu visible; 8. Navigate to roles-submenu via navigateToSubMenu (isActive=false) and wait for GET /roles response; 9. Verify list content (verify each row contains role name); 10. Verify permissions-submenu visible; 11. Navigate to permissions-submenu via navigateToSubMenu (isActive=false) and wait for GET /permissions response; 12. Verify list content (verify each row contains permission display_name) |



