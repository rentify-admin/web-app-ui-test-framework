## UI Regression Tests

| File → Test | Description | Steps |
|---|---|---|
| applicant_edits_a_workflow_used_by_another_applicant.spec.js → Should edit a workflow used by another applicant and only reflects changes to current | Validates workflow isolation by creating two identical applications with Autotest-suite-fin-only workflow (6 applicant types, High Risk flags, $500 min), removing 'Other' type from App1, and verifying App2 retains all 6 types unchanged | 1. Admin login; 2. Generate unique names for App1 and App2; 3. Create App1 with 6 applicant types (Affordable Occupant, Affordable Primary, Employed, International, Self-Employed, Other) using Autotest-suite-fin-only workflow, High Risk flags, $500 minimum; 4. Create App2 with identical config; 5. Edit App1 by removing 'Other' applicant type; 6. Verify App2 still has all 6 applicant types (count > App1); 7. Cleanup both applications |
| applicant_type_workflow_affordable_occupant.spec.js → Should complete applicant flow with affordable occupant applicant type | Validates complete Affordable Occupant workflow using 'AutoTest Suite - Full Test' application, including session generation, terms handling, applicant type selection, state modal, rent budget ($555), applicant step skip, and Persona iframe ID verification (Driver's License with camera capture for front/back photos + 3 selfie attempts) | 1. Admin login; 2. Navigate to applications; 3. Find and invite 'AutoTest Suite - Full Test'; 4. Generate session (first_name: 'Affordable', last_name: 'Test', email: 'affordable@verifast.com'); 5. Navigate to applicant view via session link; 6. Handle optional terms checkbox; 7. Select Affordable Occupant applicant type (#affordable_occupant); 8. Handle optional state modal (select US state); 9. Complete applicant form with rent_budget=$555; 10. Skip applicants step; 11. Complete ID verification using Persona iframe camera-based flow (Driver's License selection via #select__option--dl, web camera capture for front/back ID photos, 3 selfie attempts) |
| approval_condition_search_verify.spec.js → Approval Conditions — Search by Name, Description, and BE Name | Validates approval condition search functionality across three columns with API filter verification: Name column ('Mismatch' search), Description column ('computed cadence' search), and Backend Name column ('EMPLOYMENT_LETTER_UPLOADED' exact match) using searchAndValidateFlags helper with GET /flags API response validation | 1. Navigate to app URL; 2. Admin login; 3. Submit login and set locale; 4. Verify applicants-menu visible; 5. Click applications-menu; 6. Navigate to approval-conditions-submenu via gotoPage and wait for GET /flag-collections response; 7. Verify flagCollections.length > 0; 8. Click view button for first flag collection; 9. Search for 'Mismatch' in flag-name-col via searchAndValidateFlags helper (fill app-cond-flag-search-input, wait for GET /flags response with filters containing 'mismatch', verify all returned flags have 'Mismatch' in flag-name-col); 10. Search for 'computed cadence' in flag-description-col via searchAndValidateFlags helper (fill search input, wait for GET /flags response with filters containing 'computed cadence', verify all returned flags have 'computed cadence' in flag-description-col); 11. Search for 'EMPLOYMENT_LETTER_UPLOADED' in flag-key-col with exactMatch=true via searchAndValidateFlags helper (fill search input, wait for GET /flags response with filters containing 'employment_letter_uploaded', verify all returned flags have exact text 'EMPLOYMENT_LETTER_UPLOADED' in flag-key-col) |
| application_create_delete_test.spec.js → Should create and delete an application with multiple applicant types | Validates end-to-end application lifecycle: creates application with unique name, configures with Verifast org, 6 applicant types, Autotest-suite-fin-only workflow, High Risk flags, $500 minimum, publishes to LIVE, and deletes successfully | 1. Navigate to home; 2. Admin login; 3. Create application with unique name (AutoTest Create_Delete_{randomNumber}); 4. Configure with organization='Verifast', 6 applicant types (Affordable Occupant, Affordable Primary, Employed, International, Self-Employed, Other), workflow='Autotest-suite-fin-only', flag_collection='High Risk', minimumAmount=$500; 5. Publish application to LIVE; 6. Delete application; 7. Verify deletion successful |
| application_edit_id_template_settings.spec.js → Should edit an application ID template settings | Validates Persona Template ID editing and persistence in 'AutoTest Suite - ID Edit Only' workflow: edits template value to 'itmpl_tester_Edited', verifies persistence after modal reopen, and restores original value | 1. Admin login; 2. Navigate to applications; 3. Search for 'AutoTest Suite - ID Edit Only'; 4. Open application edit modal; 5. Click submit application setup; 6. Open workflow identity verification setup modal; 7. Capture current persona template ID value; 8. Edit and save with value 'itmpl_tester_Edited'; 9. Wait 5 seconds; 10. Reopen workflow identity setup modal; 11. Verify template ID persisted as 'itmpl_tester_Edited'; 12. Restore original template ID value; 13. Wait 3 seconds for save |
| check_ui_shows_na_for-high_balance.spec.js → Should check UI not shows N/A for high balance accounts | Validates high-balance account ($550k starting balance) UI rendering using 'AutoTest - Simulation financial employment' with Veridocs simulation: verifies balance columns, transactions, Cash Flow card, and Monthly Gross Income display actual dollar values (not 'N/A') matching backend API GET /sessions/{id} payload | 1. Admin login and capture auth token; 2. Navigate to applications page; 3. Find and invite 'AutoTest - Simulation financial employment'; 4. Generate session for user (alexander sample); 5. Open session link in new context; 6. Fill rent_budget=$555 and submit; 7. Upload financial verification using Simulation provider with highBalanceBankStatementData payload (starting balance: $550,000, 5 large transactions); 8. Wait 2 seconds for processing; 9. Click continue on financial verification; 10. Skip employment verification step; 11. Close applicant page and return to admin; 12. Navigate to applicants and search for session by ID; 13. Navigate to session report and click financial section; 14. Verify all balance columns do not contain 'n/a' text; 15. Click transactions radio and verify all transaction balance columns do not contain 'n/a'; 16. Poll Cash Flow card for value (max 10 attempts × 500ms); 17. Verify Cash Flow displays dollar amount (not N/A); 18. Fetch backend income from API GET /sessions/{id}; 19. Poll Monthly Gross Income card for value (max 10 attempts × 500ms); 20. Verify Monthly Gross Income matches backend payload exactly; 21. Cleanup session via API if test passed |
| check_org_member_application_permission_update.spec.js → Admin should be able to update an organization member's application permissions | Validates view_applications permission binding toggle for member 'test_reviwer@verifast.com': toggles checkbox in last application row, saves via PATCH /organizations/{orgId}/members/{memberId} API, reverts toggle, saves again, and verifies bidirectional persistence | 1. Admin login and set locale to English; 2. Navigate to organization menu and click organization self submenu; 3. Verify members tab (users-tab) visible and click it; 4. Wait for members table to be visible; 5. Search for target member email 'test_reviwer@verifast.com' using search bar; 6. Find and click edit button for target member row; 7. Wait for member-role-modal and applications API response; 8. Scroll to last row in all-application-table; 9. Check current state of view_applications checkbox in last row; 10. Toggle checkbox (check if unchecked, uncheck if checked); 11. Wait 2 seconds for state change; 12. Click save-app-permission-btn and wait for PATCH /organizations/{orgId}/members/{memberId} response; 13. Wait 2 seconds; 14. Revert change by toggling checkbox back to original state; 15. Click save button again and wait for PATCH response; 16. Verify permission update and revert completed successfully |
| co_app_household_with_flag_errors.spec.js → Should verify co-applicant flag attribution and household status transitions | Validates household approval status transitions via flag lifecycle using 'Autotest - Household UI test' with Simulation API: Primary completes all steps (PERSONA/CUSTOM/VERIDOCS payloads) → APPROVED after resolving INCOME_SOURCE_CADENCE_MISMATCH_ERROR; Co-app invited → REJECTED + GROUP_MISSING_IDENTITY flag; Co-app completes ID with mismatched name → GROUP_MISSING_IDENTITY removed + IDENTITY_NAME_MISMATCH_CRITICAL → REJECTED; Resolve flag → APPROVED restored | 1. Admin login and navigate to applications; 2. Find and invite 'Autotest - Household UI test'; 3. Generate session for primary (Primary Applicant); 4. Open session in new context; 5. Select Affordable Primary applicant type; 6. Handle state modal (select US state); 7. Fill rent_budget=$500 and submit; 8. Skip applicants step; 9. Complete primary ID verification via API using Simulation PERSONA_PAYLOAD with matching name (passes); 10. Complete primary financial verification via API using Simulation CUSTOM_PAYLOAD; 11. Click continue on financial step if visible; 12. Complete primary employment verification via API using Simulation VERIDOCS_PAYLOAD; 13. Add additional income source via API (AMI=$500) to prevent GROSS_INCOME_RATIO_EXCEEDED; 14. Navigate to applicants in admin view; 15. Search for session by ID; 16. Click session and open View Details; 17. Poll for INCOME_SOURCE_CADENCE_MISMATCH_ERROR flag (max 60sec, 2sec intervals); 18. Mark INCOME_SOURCE_CADENCE_MISMATCH_ERROR as non-issue; 19. Close details modal; 20. Poll API for approval_status=APPROVED (max 30sec, 2sec intervals); 21. ASSERTION 1 (API): Verify status=APPROVED after flags resolved; 22. ASSERTION 1 (UI): Verify household-status-alert shows 'Meets Criteria'; 23. Navigate to applicants step via 2nd step-APPLICANTS-lg element; 24. Add co-applicant (CoApplicant Household) via fillhouseholdForm; 25. Click continue to invite co-app; 26. Close primary page; 27. Reload admin page and open View Details; 28. ASSERTION 2a: Verify GROUP_MISSING_IDENTITY flag is visible; 29. Close modal; 30. Poll API for approval_status=REJECTED (max 30sec); 31. ASSERTION 2b (API): Verify status=REJECTED (co-app invited but incomplete); 32. ASSERTION 2b (UI): Verify UI shows 'Criteria Not Met'; 33. Extract co-app invite URL from session.data.children; 34. Open co-app link in new context; 35. Select Affordable Primary type for co-app; 36. Update state modal; 37. Complete co-app ID verification via API using PERSONA_PAYLOAD with MISMATCHED name (X Y instead of CoApplicant Household - triggers flag); 38. Wait 3 seconds for flag creation; 39. Close co-app page; 40. Reload admin page and open View Details; 41. ASSERTION 3a: Verify GROUP_MISSING_IDENTITY count=0 (gone after co-app completes ID); 42. ASSERTION 3b: Verify IDENTITY_NAME_MISMATCH_CRITICAL flag is visible; 43. Verify flag text contains 'Identity Name Mismatch (Critical)' and 'Co-Applicant: Coapplicant Household'; 44. Poll API for approval_status=REJECTED (max 30sec); 45. ASSERTION 3c (API): Verify status=REJECTED (due to name mismatch); 46. ASSERTION 3c (UI): Verify UI shows 'Criteria Not Met'; 47. Mark IDENTITY_NAME_MISMATCH_CRITICAL as non-issue; 48. Close modal; 49. Poll API for approval_status=APPROVED (max 60sec, 2sec intervals); 50. ASSERTION 4 (API): Verify status restored to APPROVED after resolving flag; 51. ASSERTION 4 (UI): Verify UI shows 'Meets Criteria' |
| create_multiple_remarks.spec.js → Should allow creating multiple remarks successfully | Validates income source remark CRUD operations using 'Autotest - Heartbeat Test - Financial' with Veridocs simulation: creates 3 timestamped remarks (R1, R2, R3), verifies newest-first ordering (R3→R2→R1) via GET /income-sources/{id}/comments API, hides R2 via PATCH, toggles hidden comments visibility, unhides R2, and verifies all state transitions persist correctly with admin.email authorship | 1. Admin login and capture auth token; 2. Navigate to applications page; 3. Find and invite 'Autotest - Heartbeat Test - Financial' application; 4. Generate new session (email: 'playwright+remarks@verifast.com', first_name: 'Remarks', last_name: 'Primary'); 5. Open session link in new context; 6. Setup session flow (no applicant type); 7. Update rent budget; 8. Complete financial verification using Simulation provider with Veridocs payload; 9. Navigate to applicants and search for session by ID; 10. Navigate to session by ID; 11. Click income-source-section-header; 12. Click first income-source-detail-btn; 13. Click 'Add Remark' button; 14. Fill remark 'R1 - first remark – {ISO_TIMESTAMP}' and submit; 15. Wait 1 second; 16. Click 'Add Remark' button again; 17. Fill remark 'R2 - second remark – {ISO_TIMESTAMP}' and submit; 18. Wait 1 second; 19. Click 'Add Remark' button again; 20. Fill remark 'R3 - third remark – {ISO_TIMESTAMP}' and submit; 21. Wait 1 second; 22. Click 'View Remarks' and wait for GET /income-sources/{id}/comments response; 23. Verify all 3 remarks appear in correct order (R3, R2, R1 - newest first); 24. Verify each remark authored by admin.email; 25. Verify all 3 remarks visible on screen; 26. Verify R2 appears in 2nd position (nth(1)); 27. Click hide-comment-btn on R2 and wait for PATCH response; 28. Wait 200ms; 29. Verify R3 in position 0, R1 in position 1 (R2 hidden); 30. Toggle hidden comments on; 31. Verify R2 now visible again in position 1 (as hidden); 32. Toggle hidden comments off; 33. Verify only R3 and R1 visible; 34. Toggle hidden comments on again; 35. Verify all 3 remarks visible (R3, R2, R1); 36. Click unhide-comment-btn on R2 and wait for PATCH response; 37. Toggle hidden comments off; 38. Verify all 3 remarks still visible (R3, R2, R1); 39. Close income-reviews-modal; 40. Close income-source-details modal |
| document_rejection_from_any_state.spec.js → Reject a Document Regardless of Processing State | Validates document rejection workflow at different processing states using 'Autotest - Heartbeat Test - Financial': uploads 1st financial-statement.pdf and fails it while pre-processed (PATCH intercepted to 500 + POST /flags creates flag), uploads 2nd PDF, accepts it via PATCH /documents/{id}, then rejects the accepted document, verifying both pre-processed and fully-processed rejection paths work correctly | 1. Admin login and capture auth token; 2. Navigate to applications; 3. Find and invite 'Autotest - Heartbeat Test - Financial'; 4. Generate session (email: playwright+docreject{timestamp}@verifast.com, firstName: DocReject, lastName: Test); 5. Open session in new context; 6. Setup session flow (no applicant type selection); 7. Fill rent_budget and submit; 8. Upload 1st financial statement PDF via uploadFinancialStatement helper (click financial-upload-statement-btn, wait for modal, upload '/assets/financial-statement.pdf', submit via upload-file-submit-btn); 9. Navigate to admin and search for session; 10. Navigate to session report; 11. Click files-section-header to expand; 12. Locate 1st uploaded document row (document-row locator); 13. Fail 1st document while in pre-processed state via failDocument helper (click fail-doc-btn, wait for modal-container with PATCH /documents/{id} intercepted to 500 status, verify POST /flags response created flag, close modal); 14. Return to applicant page; 15. Upload 2nd financial statement PDF via uploadFinancialStatement helper; 16. Return to admin session files section; 17. Locate 2nd uploaded document row; 18. Accept 2nd document via acceptDocument helper (click edit-doc-btn, wait for edit modal, click accept-document-btn, wait for PATCH /documents/{id} response, close modal); 19. Wait 2 seconds for state update; 20. Reject 2nd document via rejectDocument helper (click edit-doc-btn, wait for modal, click reject-document-btn, wait for PATCH /documents/{id} response, close modal); 21. Verify both documents successfully processed through their respective workflows (fail pre-processed, accept then reject fully processed) |
| frontend_heartbeat.spec.js → Should check frontend heartbeat | Validates main sidebar navigation, header, profile menu, and all menu/submenu titles are accessible | 1. Navigate to home; 2. Admin login and set locale; 3. Verify household-status-alert visible; 4. Execute checkHeaderAndProfileMenu (verify header visible, click user-dropdown-toggle-btn, verify user-profile-dropdown-item and user-logout-dropdown-item visible, click profile, verify 'User Profile' text visible, click applicants-submenu); 5. Execute checkSidebarMenusAndTitles (iterate through all sidebar menus: applicants-menu with 4 submenus, applications-menu with 5 submenus, documents-menu with 2 submenus, transactions-menu with 4 submenus, incomesource-menu with 1 submenu, organization-menu with 2 submenus, organizations-menu no submenus, reports-menu with 4 submenus, users-menu with 3 submenus, address-menu no submenus, tools-menu with 3 submenus, settings-menu with 4 submenus, logout-menu no submenus); 6. For each menu: verify visibility, click (except first), verify submenu visibility and titles match expected test IDs |
| heartbeat_completed_application_click_check.spec.js → Heartbeat Test: Completed Application Clicks (frontend) | Validates applicant popup navigation using pre-created complete session (Persona ID, VERIDOCS_PAYLOAD financial, ATOMIC_PAYLOAD employment): clicks view-applicant-session-btn to open popup, navigates through all steps (Rent Budget, Applicants, Identity, Financial, Employment, Summary), verifies completed-status-badge visible for each completed step | 1. Create complete session in beforeAll using 'Autotest - UI permissions tests' application (firstName: Heartbeat, lastName: ClickTest, rentBudget: $600, completeIdentity: true via Persona, completeFinancial: true via VERIDOCS_PAYLOAD simulation, completeEmployment: true via ATOMIC_PAYLOAD simulation); 2. Navigate to home; 3. Admin login; 4. Verify household-status-alert visible; 5. Navigate to applicants-submenu via gotoPage helper; 6. Click first session in the list; 7. Wait 5 seconds for session data to load; 8. Click view-applicant-session-btn and wait for popup event; 9. In popup: verify start-navigating-btn visible; 10. Click start-navigating-btn; 11. Verify get-started-btn visible and click it; 12. Verify completed-status-badge visible (for Rent Budget step); 13. Click continue-to-applicants-btn; 14. Verify completed-status-badge visible (for Applicants step); 15. Click continue-to-id-verification-btn; 16. Verify completed-status-badge visible (for Identity step); 17. Click continue-to-financial-btn; 18. Verify completed-status-badge visible (for Financial step); 19. Click continue-to-employment-btn; 20. Verify completed-status-badge visible (for Employment step); 21. Click financial-verification-continue-btn; 22. Verify summary-completed-section visible (final Summary page); 23. Close popup; 24. Cleanup session and contexts in afterAll |
| verify_application_edit_id_step_edit.spec.js → Should verify application edit id step edit | Validates application editing and persistence via 'AutoTest Suite - ID Edit Only' (2 serial tests): (Test 1) Toggles identityRequired checkbox from checked→unchecked, edits guarantor (5), incomeBudget (1), rentBudgetMin (500), saves via PATCH API with auto-publish; (Test 2) Reopens and verifies identityRequired=false persists, guarantor='5' persists, toggles identity back to checked=true, reverts guarantor to '3', saves again | TEST 1 (Edit and Toggle Identity): 1. Admin login and navigate; 2. Navigate to applications menu and submenu via gotoPage; 3. Search for 'AutoTest Suite - ID Edit Only' application; 4. Loop through application table rows to find matching application; 5. Click edit button and wait for GET /applications/{id} and GET /organizations responses; 6. Verify 'Application Setup' heading visible; 7. Click submit-application-setup and wait for PATCH /applications/{id} response; 8. Click workflow-identity-verification button; 9. Verify workflow-identity-modal visible; 10. Check identityRequired checkbox state (expect checked=true initially); 11. Toggle checkbox if needed to uncheck it; 12. Verify checkbox is now unchecked; 13. Click submit-identity-setup-form and wait for PATCH /applications/{id}/steps/{id} response; 14. Click submit-app-workflow-edit-form; 15. Fill guarantor field with '5'; 16. Fill incomeBudget with '1'; 17. Fill rentBudgetMin with '500'; 18. Click submit-application-setting-modal and wait for PATCH /applications/{id} response AND GET /applications list refresh (auto-publish in edit mode); 19. Wait 2 seconds for UI to reflect changes. TEST 2 (Verify Updates Persist): 1. Admin login and navigate; 2. Navigate to 'AutoTest Suite - ID Edit Only' application edit; 3. Click submit-application-setup; 4. Click workflow-identity-verification; 5. Check identityRequired checkbox state (expect checked=false from previous test - verifies persistence); 6. Toggle checkbox if needed to check it; 7. Verify checkbox is now checked; 8. Submit identity setup form; 9. Verify guarantor field has value '5' (from previous test - verifies persistence); 10. Fill guarantor field with '3' (revert to original); 11. Fill incomeBudget with '1'; 12. Fill rentBudgetMin with '500'; 13. Submit application settings and wait for auto-publish |
| org_member_application_binding_scoping_check.spec.js → Check Application Binding Scoping (Inbox Visibility) | Validates application binding scoping using 'Permissions Test Org' with 'empty role v2': Creates org member, registers user, verifies applicants-menu NOT visible without permissions, grants view_sessions permission → user sees ALL org sessions; Binds 'Test App P1' → user sees only P1 sessions; Binds 'Test App P2' → user sees P1 OR P2 sessions with All tab badge='2' | 1. Admin login and navigate; 2. Verify household-status-alert visible; 3. Click organizations-menu; 4. Verify organizations-heading visible; 5. Wait 2 seconds; 6. Search for organization 'Permissions Test Org' and wait for GET /organizations response; 7. Find exact match for organization name in orgList; 8. Extract organization ID and click organization link; 9. Verify users-tab visible and click it; 10. Click create-org-member-btn; 11. Fill email with random generated email; 12. Select 'empty role v2' role; 13. Click submit-create-member; 14. Click copy-invitation-link; 15. Extract invitation URL from page text; 16. Close modal; 17. Open invitation URL in new browser context; 18. Wait 2 seconds; 19. Fill registration form (First Name: Test, Last Name: User, Password: password, Confirm Password: password); 20. Check terms checkbox; 21. Click Register button; 22. Login with new user credentials; 23. Wait for user-dropdown-toggle-btn visible; 24. Verify applicants-menu NOT visible (no permissions yet); 25. Return to admin page and search for member by email; 26. Click edit button for member; 27. Track user for cleanup via cleanupHelper; 28. Search permissions for 'view sessions' and check View Sessions permission; 29. Click Save Permissions button; 30. Reload member page and wait; 31. Hover sidebar and click sidebar-action to expand; 32. Click applicants-menu; 33. Click applicants-submenu and wait for GET /sessions and GET /organizations/self responses; 34. Extract user's organization ID from /organizations/self response; 35. Verify userOrgId matches expectedOrgId; 36. Extract API limit and sessions count from response; 37. Count session cards in side-panel; 38. Verify sideItemsCount equals min(apiLimit, apiReturnedCount) - user sees ALL org sessions; 39. Search for 'Test App P1' application in admin; 40. Check view_applications binding for firstAppName; 41. Click save-app-permission-btn; 42. Reload member page and wait for GET /sessions response; 43. Wait; 44. Count session cards again; 45. Verify sessions.count > 0 after App1 binding; 46. Click first session card; 47. Loop through all visible sessions and verify each contains firstAppName text; 48. Verify all sessions belong to Test App P1; 49. Extract badge count from All tab; 50. Search for 'Test App P2' and check binding; 51. Click save-app-permission-btn; 52. Reload and wait for GET /sessions response; 53. Try to click new-session-btn (optional); 54. Verify All tab badge shows '2'; 55. Count session cards; 56. Verify count > 0; 57. Click first session; 58. Loop through all sessions and verify each contains firstAppName OR secondAppName; 59. Verify all sessions belong to Test App P1 OR Test App P2; 60. Cleanup tracked user via afterAll hook |
| pdf_download_test.spec.js → Should successfully export PDF for an application | Validates PDF export functionality for minimal session (rent budget only, no verifications completed) using 'Autotest - UI permissions tests' application: staff user logs in, navigates directly to session URL, and exports PDF via checkExportPdf utility verifying download event and correct filename pattern | 1. Create minimal session in beforeAll using 'Autotest - UI permissions tests' application (firstName: 'PDFTest', lastName: 'Export', email with timestamp, rentBudget: $2500, NO steps completed - completeIdentity/Financial/Employment all false); 2. Navigate to home; 3. Login as staff user (staff+testing@verifast.com); 4. Submit login and set locale; 5. Verify applicants-menu visible; 6. Navigate directly to session URL (/applicants/applicants/${sessionId}); 7. Verify household-status-alert visible; 8. Export PDF using checkExportPdf utility (clicks session-action-btn, clicks export-pdf-btn, waits for download event, verifies PDF file created in new tab with correct filename pattern); 9. Cleanup session and contexts in afterAll |
| property_admin_permission_test.spec.js → Verify property admin user permissions | Validates Property Admin role permissions via 3-test serial suite with pre-created complete session: (Test 1) Creates user via API with dynamically fetched 'Autotest - Property Admin' role and 'Permissions Test Org' org IDs; (Test 2) Verifies applications list/edit/delete access, workflows edit forbidden (403), approval conditions view-only, organization editing, member CRUD, roles table; (Test 3) Validates session operations including flag review (cannot mark as issue), rent budget edit, flag resolution, approve/reject, PDF export, document requests, applicant invites, and all report sections | beforeAll: Create complete session using 'Autotest - UI permissions tests' application (firstName: 'PropAdmin', lastName: 'Test', email with timestamp, rentBudget: $2500, all steps completed). TEST 1: Authenticate as admin, fetch 'Autotest - Property Admin' role, fetch 'Permissions Test Org' organization, create property admin user via API with dynamically fetched role and org IDs, track for cleanup. TEST 2: Login as property admin, verify applications list/edit/delete permissions, verify workflows edit returns 403, verify approval conditions view (no edit), edit organization city, create/delete organization members, verify roles table. TEST 3: Login as property admin, use pre-created session from beforeAll (prepareSessionForFreshSelection), verify flags section (checkIssueButtonPresent=false), verify events/activity, check rent budget edit, resolve all flags before approve/reject, session approve/reject, export PDF, request additional documents, invite applicant, upload documents, check identity/income/employment/files/financial sections. Cleanup user and session in afterAll |
| staff_user_permissions_test.spec.js → Should create member record and assign it to the Staff role | Validates Staff role permissions via 2-test serial suite with pre-created complete session: (Test 1) Creates staff user via API with dynamically fetched 'Autotest - Staff' role and 'Permissions Test Org' org IDs; (Test 2) Verifies applications menu visible with NO edit icons, validates session operations including flag review (CAN mark as issue), PDF export, identity section restrictions (show-images/more-details NOT visible), income source restrictions (detail/delist buttons disabled), and employment/files sections | beforeAll: Create complete session using 'Autotest - UI permissions tests' application (firstName: 'StaffUser', lastName: 'Test', email with timestamp, rentBudget: $2500, all steps completed). TEST 1: Authenticate as admin, fetch 'Autotest - Staff' role and 'Permissions Test Org' organization dynamically, create staff user via API with fetched role and org IDs, track for cleanup. TEST 2: Login as staff user, verify applications menu visible with NO edit icons, verify applications table displays correctly, use pre-created session from beforeAll (prepareSessionForFreshSelection), verify flags section (checkIssueButtonPresent=true - staff CAN mark issues), export PDF, verify identity section (show-images/more-details NOT visible), verify income sources (detail/delist buttons disabled), verify employment/files sections. Cleanup user and session in afterAll |
| user_flags_approve_reject_test.spec.js → Session Flag and Session Approve/Reject | Validates flag management and session approval workflow via 2 serial suites using VERIDOCS simulator: (Suite 1) Marks NO_INCOME_SOURCES_DETECTED as issue and verifies moved to decline section, marks MISSING_TRANSACTIONS as non-issue and verifies moved to reviewed section; (Suite 2) Approves documents via files section status pill, marks all items-requiring-review flags as issues, waits for status transition, and validates approve/reject flow | SUITE 1 (Session Flag): Create session with VERIDOCS simulator, navigate to flags, mark NO_INCOME_SOURCES_DETECTED as issue, verify moved to decline section, mark MISSING_TRANSACTIONS as non-issue, verify moved to reviewed section. SUITE 2 (Approve/Reject): Create session, verify 'Unreviewed' status, approve documents via files section, mark all flags in items-requiring-review as issues, wait for status to NOT contain 'Requires Review', proceed with approve/reject flow |
| user_permissions_verify.spec.js → Should allow admin to create user via API | Validates Centralized Leasing role permissions via 3-test serial suite with pre-created complete session: (Test 1) Creates user via API with dynamically fetched 'Autotest - Centralized Leasing' role and 'Permissions Test Org' org IDs; (Test 2) Verifies application editing permissions (can access /application/{id}/edit and view application_name); (Test 3) Validates comprehensive session operations including flag viewing, rent budget edit, flag resolution, approve/reject, PDF export, document requests, applicant invites, document uploads, session merge, applicant deletion, and all report sections (identity/income/employment/files/financial) | beforeAll: Create complete session using 'Autotest - UI permissions tests' application (firstName: 'UserPerm', lastName: 'Test', email with timestamp, rentBudget: $2500, all steps completed). TEST 1: Authenticate as admin, fetch 'Autotest - Centralized Leasing' role and 'Permissions Test Org' organization dynamically, create user via API with fetched role and org IDs, track for cleanup. TEST 2: Login as user, navigate to applications, verify edit button visible, click edit, verify URL changes to /application/{id}/edit, verify application_name input not empty, cancel. TEST 3: Login as user, verify applicants menu/submenus visible, use pre-created session from beforeAll (prepareSessionForFreshSelection), verify can view flags, edit rent budget, resolve all flags before approve/reject, reload page for fresh state, approve/reject session, export PDF, request documents, invite applicant, upload documents, merge session, delete applicant, check all report sections (identity/income/employment/files/financial). Cleanup user and session in afterAll |
| request_additional_information.spec.js → Document Request: Complete validation (happy path + negative tests) | Validates additional document request flow using 'AutoTest - Request Doc UI test': completes rent budget, skips Applicants, completes ID via Simulation API, skips Financial, requests Pay Stub Upload via POST /invitations (employment_document), verifies invitation persisted, validates GET /sessions/{id} includes EMPLOYMENT_DOCUMENT action, checks GET /sessions/{id}/events audit trail, verifies current_step unchanged, validates applicant can complete employment, and tests negative cases (submit disabled without selection, 500 error toast) | 1. Authenticate data manager; 2. Admin login and capture token; 3. Invite 'AutoTest - Request Doc UI test'; 4. Generate session and track for cleanup; 5. Open applicant in new context; 6. Handle state modal; 7. Complete rent budget; 8. Skip Applicants; 9. Authenticate guest from invite; 10. Complete ID via API (Simulation); 11. Skip Financial; 12. Verify Employment step visible; 13. Capture baseline current_step (GET /sessions/{id}); 14. Open report for session; 15. Open Request Additional Information, select Pay Stub Upload, submit; 16. Assert POST /invitations payload (employment_document, documents includes pay_stub) and 201 response; 17. GET /invitations/{id} asserts persisted; 18. GET /sessions/{id} includes action EMPLOYMENT_DOCUMENT (REQUESTED); 19. GET /sessions/{id}/events includes session.information_requested and action.requested; 20. Verify events in UI via view-details; 21. Assert current_step unchanged vs baseline; 22. Applicant: complete employment via API without auto-complete, assert employment-step-continue enabled and clickable; 23. Negative: submit disabled without selection; 24. Negative: intercept POST /invitations with 500 and assert error alert |


## UI Regression and External-Integration Tests

| File → Test | Description | Steps |
|---|---|---|
| application_step_should_skip_properly.spec.js → Check Application step skip works properly | Validates comprehensive skip/revisit functionality using 'AutoTest Suite - Full Test': Employed applicant completes ID (Persona), Financial (Plaid Betterment custom_coffee/custom_gig), skips Applicants and Employment → Summary; Revisits Applicants (shows Skipped), skips again; Revisits Employment (shows Skipped), skips again; Revisits Rent Budget ($500→$1000); Returns to Applicants, adds co-app, completes → Summary; Returns to Employment, completes Paychex paystub (test-good) → final Summary | 1. Admin login and navigate to applications; 2. Find and invite 'AutoTest Suite - Full Test'; 3. Generate session for user (Playwright Skip); 4. Logout admin; 5. Open applicant session link; 6. Select 'Employed' applicant type; 7. Update state modal to ALABAMA; 8. Fill rent_budget=$500; 9. Skip Applicants invite step; 10. Complete ID verification via Persona camera-based flow (identityStep); 11. Complete Plaid financial step using Betterment bank (username: custom_coffee, password: custom_gig) and wait for connection completion; 12. Skip Employment step; 13. Verify Summary page visible; 14. Navigate back to Applicants step (shows 'Skipped' status); 15. Skip again and return to Summary; 16. Navigate to Employment step (shows 'Skipped' status); 17. Skip again and return to Summary; 18. Navigate to Rent Budget step (shows 'Completed' status); 19. Update rent_budget to $1000 and return to Summary; 20. Navigate back to Applicants step; 21. Add co-applicant (Playwright Skip Coapp) via fillhouseholdForm; 22. Complete Applicants step via continue button; 23. Wait 3 seconds and verify Summary; 24. Navigate to Employment step (still 'Skipped'); 25. Complete Paychex paystub connection via Atomic iframe (username: test-good); 26. Complete Employment step via continue button; 27. Verify final Summary page visible |
| check_coapp_income_ratio_exceede_flag.spec.js → Should confirm co-applicant income is considered when generating/removing Gross Income Ratio Exceeded flag | Validates GROSS_INCOME_RATIO_EXCEEDED flag lifecycle using 'AutoTest Suite - Full Test': Primary completes all steps (Employed type, ID via Persona, Plaid Betterment custom_gig, Paychex paystub) with co-app invited but incomplete → rent/income ratio >30% → flag present; Co-app completes all steps (Other type, ID via Persona, Plaid Betterment user_bank_income, Paychex paystub) → combined income pushes ratio ≤30% → flag removed (count=0) | 1. Admin login and navigate to applications; 2. Find and invite 'AutoTest Suite - Full Test'; 3. Generate session and extract link; 4. Open session in new browser context with camera permissions; 5. Select 'Employed' applicant type; 6. Update state modal to ALABAMA; 7. Fill rent_budget=$1500; 8. Add co-applicant (Playwright CoApp) via applicant step; 9. Complete primary ID verification via Persona camera flow (identityStep); 10. Complete primary Plaid financial connection (Betterment bank, username: custom_gig, password: test); 11. Wait for Plaid connection completion; 12. Complete primary Paychex paystub connection; 13. Complete employment step; 14. Close applicant page; 15. Navigate to applicants and search for session; 16. Click session and capture response data; 17. Verify session has co-applicant (children.length > 0, role=APPLICANT); 18. Extract and verify rent budget, monthly income, and rent/income ratio from session summary; 19. Calculate ratio and verify >30% threshold (flag should be present); 20. Click view-details-btn and verify GROSS_INCOME_RATIO_EXCEEDED flag visible; 21. Close modal; 22. Open session actions and click invite-applicant; 23. Click reinvite for co-applicant and copy invite link via clipboard; 24. Close invite modal; 25. Open co-applicant link in new context with camera permissions; 26. Select 'Other' applicant type for co-app; 27. Complete co-app ID verification (identityStep); 28. Complete co-app Plaid financial (Betterment, username: user_bank_income, password: '{}'); 29. Wait for connection completion; 30. Complete co-app Paychex paystub connection; 31. Complete co-app employment step; 32. Close co-app page; 33. Reload admin page and search session again; 34. Verify monthly income increased (new income > initial income); 35. Extract new rent/income ratio; 36. Poll and retry up to 5 times (5sec intervals, max 25sec) until calculated ratio ≤30%; 37. Verify calculated ratio ≤30% threshold (flag should be removed); 38. Click view-details-btn and verify GROSS_INCOME_RATIO_EXCEEDED flag count=0; 39. Close modal |
| frontend-session-heartbeat.spec.js → Verify Frontend session heartbeat | Validates complete session flow using 'Autotest - Application Heartbeat (Frontend)': Employed applicant skips Applicants initially, adds co-app (PWCoapp Heartbeat) via revisit using waitForButtonOrAutoAdvance helper, tests manual upload modals (ID and Financial cancel flows), skips ID and Financial steps, completes Paychex paystub via Atomic iframe, verifies income sources counter with lazy-load polling and SVG text validation | 1. Admin login and navigate to applications; 2. Find and invite 'Autotest - Application Heartbeat (Frontend)'; 3. Generate session for Playwright Heartbeat user; 4. Logout admin; 5. Open session invite link; 6. Select 'Employed' applicant type; 7. Wait 3 seconds and handle state modal (ALABAMA); 8. Fill rent_budget=$500; 9. Skip applicants invite step; 10. Verify start-id-verification visible; 11. Wait 4 seconds; 12. Navigate to Applicants step (shows 'Skipped'); 13. Add co-applicant (PWCoapp Heartbeat) via fillhouseholdForm; 14. Wait for applicant-invite-continue-btn to be enabled OR auto-advance to start-id-verification (via waitForButtonOrAutoAdvance); 15. Verify start-id-verification visible; 16. Click start-manual-upload-id-verification; 17. Verify manual upload modal; 18. Click cancel-manual-upload-btn; 19. Skip ID verification; 20. Verify connect-bank visible (Financial step); 21. Click financial-upload-statement-btn; 22. Verify cancel-manual-upload-btn visible; 23. Cancel manual upload; 24. Verify connect-bank visible again; 25. Skip financial step; 26. Verify document-pay_stub visible (Employment step); 27. Complete Paychex paystub connection via Atomic iframe; 28. Wait for employment-step-continue to be enabled OR auto-advance to summary (via waitForButtonOrAutoAdvance); 29. Verify summary-completed-section visible; 30. Logout guest via profile-dropdown-btn and logout-dropdown-btn; 31. Verify get-started-btn visible; 32. Navigate to home and login as admin; 33. Search for session by sessionId; 34. Find session locator and click it; 35. Wait for GET /sessions/{id} response; 36. Poll for income sources counter > 0 (max 5 attempts: scroll container to bottom, wait 3sec for lazy load, read SVG counter text, reload if counter=0); 37. Click income-source-section-header and wait for GET /income-sources response; 38. Verify income sources count > 0; 39. Verify each income source visible by test ID; 40. Close page |
| financial_mx_2_attempts_success_and_failed_password.spec.js → Financial - mx - 2 attempts + Eligibility status transitions | Validates MX financial integration via 'AutoTest - Financial Only, MX and Plaid': (Part 1) Successful OAuth connection to MX Bank OAuth with authorization → iframe completion with stuck-handling; (Part 2) Failed credentials attempt using MX Bank (fail_user/fail_password) → error message display; (Part 3) Eligibility transitions: $500 rent → 'Meets Criteria', rent increased to $3000 → 'Criteria Not Met', manual income source added ($6000 OTHER) → 'Meets Criteria' restored | 1. Navigate to home; 2. Admin login and set locale; 3. Navigate to applications page; 4. Search for 'AutoTest - Financial Only, MX and Plaid'; 5. Verify application name and click invite link; 6. Generate session for FinMX Test user; 7. Copy session invite link; 8. Open link in new browser context; 9. Fill rent_budget=$500 and submit; 10. Click connect-bank and wait for POST /financial-verifications response; 11. Interact with MX iframe (int-widgets.moneydesktop.com): search for 'mx bank oau', click MX-Bank-(OAuth)-row; 12. Click continue button and wait for OAuth popup; 13. Wait for OAuth page DOM load and 3 seconds; 14. Click Authorize button on OAuth page; 15. Poll for MX connection completion (max 80 attempts × 2sec = 160sec): check if iframe closed automatically OR done button visible; 17. If done button found - click it; 18. If polling timeout - reload page and poll financial-row-status for 'Completed' text (max 10 attempts × 2sec = 20sec); 19. If connection complete via reload - treat as auto-closed and re-open iframe by clicking connect-bank; 20. Wait 2 seconds; 21. Search for 'mx bank' (non-OAuth) in MX iframe; 22. Click MX-Bank-row; 23. Fill LOGIN with 'fail_user' and PASSWORD with 'fail_password'; 24. Click credentials-continue; 25. Wait for credentials-error-message-box to appear (max 150sec); 26. Click connnect-modal-cancel to close iframe; 27. Click financial-verification-continue-btn; 28. Verify Summary page visible within 110 seconds; 29. Close applicant page and navigate to admin report; 30. Wait 5 seconds for income source generation; 31. Verify household-status-alert shows 'Meets Criteria' (MX income sufficient for $500 rent); 32. Click rent-budget-edit-btn; 33. Fill rent-budget-input with $3000 and submit; 34. Wait 2 seconds and reload page; 35. Poll for 'Criteria Not Met' status (max 15 attempts × 2sec, reload every 3 attempts); 36. Click income-source-section-header; 37. Click income-source-add and select income_type='OTHER'; 38. Uncheck 'Calculate average from transactions' checkbox; 39. Fill net_amount with $6000; 40. Click Save and wait for POST /income-sources response; 41. Wait 5 seconds for sync; 42. Verify income source visible on page; 43. Reload and verify household-status-alert shows 'Meets Criteria' (total income now sufficient for $3000 rent) |
| financial_plaid_one_transaction_error_decline.spec.js → Should handle Plaid Fin verification with insufficient transactions and decline flag | Validates Plaid insufficient transaction handling using 'AutoTest - Financial Only, MX and Plaid': completes Plaid connection with Regions Bank (custom_onetxn credentials) resulting in 1 account/1 transaction, verifies 'User Error' status with decoration-error class, confirms financial-row-sub-title displays '1 account | 1 transaction', and validates GROSS_INCOME_RATIO_EXCEEDED flag appears in View Details | 1. Navigate to home (/); 2. Admin login and set locale; 3. Navigate to applications menu and submenu; 4. Generate random name for user (Test{randomNumber}); 5. Generate session via generateSessionForApplication helper for 'AutoTest - Financial Only, MX and Plaid' (first_name/last_name: randomName, email: cra+{randomName}@verifast.com); 6. Complete applicant initial setup via completeApplicantInitialSetup helper (navigate to link, wait 8sec, handle state modal, handle optional terms checkbox, fill rent_budget=$555, submit); 7. Complete Plaid financial connection via plaidFinancialConnect helper (click Alternate Connect Bank, wait for Plaid iframe, click Continue as guest, select Regions Bank, fill username: custom_onetxn, fill password: test, submit, click Continue, click Allow, click Finish without saving); 8. Verify Summary page visible; 9. Navigate to dashboard via navigateToDashboard (/application/all); 10. Navigate to applicants via navigateToApplicants (click applicants-menu, click applicants-submenu, reload); 11. Search for session by randomName via searchSessionWithText; 12. Click first session card; 13. Poll for 'User Error' link with decoration-error class (max 90 attempts × 500ms = 45sec); 14. Click User Error link; 15. Verify financial-row-sub-title shows '1 account | 1 transaction'; 16. Close financial status modal; 17. Click 'View Details' button; 18. Verify 'Gross Income Ratio Exceeded' flag present (title='Gross income ratio is above the configured threshold and may cause automatic rejection') |
| hosted_app_copy_verify_flow_plaid_id_emp_skip.spec.js → Should complete hosted application flow with id emp skips and Plaid integration | Validates hosted application public URL flow via 'AutoTest Suite Hshld-ID-Emp-Fin with skips': phone OTP authentication (613292XXXX, 123456 code), applicant registration (teset/testrelogin, ALASKA state), rent budget ($500), Applicants/Employment skips, Persona ID with passport.jpg upload, Plaid Regions Bank (custom_onetxn/test), verifies Summary status badges (Rent/ID=Complete, Applicants/Employment=Skipped) and 'Missing Financial Transactions' error | 1. Admin login and navigate to applications; 2. Navigate to applications page; 3. Find and copy 'AutoTest Suite Hshld-ID-Emp-Fin with skips' application URL via clipboard; 4. Logout admin; 5. Navigate to copied application URL; 6. Generate random phone number (613292XXXX); 7. Fill phone-input and click get-started-btn; 8. Fill 6-digit verification code (123456) in separate input fields; 9. Submit code; 10. Complete applicant registration form (firstName: teset, lastName: testrelogin, state: ALASKA, check terms); 11. Wait for rent_budget input (max 16sec); 12. Fill rent_budget=$500 and submit; 13. Skip applicants step; 14. Complete ID verification using Persona iframe with passport.jpg upload (shouldUpload=true); 15. Skip employment verification; 16. Complete Plaid financial connection via plaidFinancialConnect (Regions Bank, username: custom_onetxn, password: test); 17. Verify Summary page visible; 18. Verify Rent Budget status shows 'Complete'; 19. Verify Identity Verification status shows 'Complete'; 20. Verify Applicants status shows 'Skipped'; 21. Verify Employment Verification status shows 'Skipped'; 22. Verify 'Missing Financial Transactions' error visible |
| co_applicant_effect_on_session_test.spec.js → Should complete applicant flow with co-applicant effect on session | Validates household summary updates via co-applicant completion using 'AutoTest Suite - Full Test': Primary (Affordable Primary, skips ID, Plaid Betterment custom_gig, Paychex paystub) completes with co-app invited → captures initial monthly_income and rent_ratio; Co-app completes (Affordable Primary, skips ID, Plaid Betterment user_bank_income, Paychex paystub) → verifies monthly_income ≠ initial, rent_ratio ≠ initial, all household members have income sources/employments, and financial section displays correctly | 1. Admin login and navigate to applications; 2. Find and invite 'AutoTest Suite - Full Test'; 3. Generate session for primary user (Playwright User); 4. Open session link in new context; 5. Select Affordable Primary applicant type; 6. Handle optional state modal (select US state); 7. Fill rent_budget=$500 and submit; 8. Add co-applicant (Playwright CoApp) via fillhouseholdForm; 9. Click continue to invite co-applicant; 10. Skip primary ID verification; 11. Complete primary Plaid financial (Betterment, username: custom_gig, password: test); 12. Wait for Plaid connection completion; 13. Complete primary Paychex paystub connection; 14. Complete primary employment step; 15. Close primary applicant page; 16. Navigate to applicants in admin view; 17. Search for session and click it; 18. Capture initial session data: verify children.length > 0 and role=APPLICANT; 19. Store initial monthly_income and rent_ratio; 20. Open session actions and reinvite co-applicant; 21. Copy co-applicant invite link via clipboard; 22. Close invite modal; 23. Open co-applicant link in new context; 24. Select Affordable Primary type for co-app; 25. Handle optional state modal; 26. Skip co-app ID verification; 27. Complete co-app Plaid financial (Betterment, username: user_bank_income, password: '{}'); 28. Wait for Plaid completion; 29. Complete co-app Paychex paystub connection; 30. Complete co-app employment step; 31. Close co-app page; 32. Reload admin page and wait for session and financial-verifications responses; 33. Search for session again; 34. Verify new monthly_income ≠ initial monthly_income; 35. Verify new rent_ratio ≠ initial rent_ratio; 36. Click income-source-section-header and wait for income-sources responses for all household members; 37. Verify each applicant has at least 1 income source; 38. Click employment-section and verify each applicant has at least 1 employment record; 39. Verify financial section data displays correctly for all household members via checkFinancialSectionData |
| skip_button_visibility_logic.spec.js → Should verify skip button visibility logic | Validates skip button state transitions using 'Autotest - Full flow skip button test' (Affordable Occupant): For each step (Applicants, Identity, Financial, Employment) verifies skip button visible initially → completes action (fill household form / Persona camera ID / Plaid / Paychex paystub) → skip button hidden + continue button appears → Summary shows all steps Complete | 1. Admin login and navigate; 2. Find 'Autotest - Full flow skip button test' and invite; 3. Generate session (email: playwright+skipbutton@verifications.com); 4. Open applicant in new context with camera perms; 5. Select Affordable Occupant; 6. Handle state modal; 7. Verify rent budget input visible and complete step; 8. Applicants: verify skip visible → fill household form → skip hidden → continue; 9. Identity: verify skip visible → complete identity (camera flow) → skip hidden → continue; 10. Financial: verify skip visible → complete Plaid Bank of America (username: custom_gig, password: test) → skip hidden → continue; 11. Employment: verify skip visible → complete Paychex paystub → skip hidden → continue; 12. Verify Summary shows all steps Complete |

## UI Critical Tests


| File → Test | Description | Steps |
|---|---|---|
| frontend_heartbeat.spec.js → Should test session actions and section dropdowns | Validates session UI components using pre-created complete session: verifies all action dropdown buttons (approve, reject, invite, trigger-pms-upload, upload-document, request-additional, income-source-automation) visible and enabled, View Details flags section accessible, and all section headers (identity, income-source, files, employment, financial, integration-logs) toggle correctly with arrow rotation classes | 1. Create complete session in beforeAll using 'Autotest - UI permissions tests' application (firstName: 'Heartbeat', lastName: 'Test', email with timestamp, rentBudget: $2500, all steps completed); 2. Navigate to home; 3. Admin login and set locale; 4. Verify household-status-alert visible; 5. Check if applicants-menu is open (has sidebar-item-open class); 6. Click applicants-menu if not open; 7. Click applicants-submenu; 8. Navigate directly to created session by ID; 9. Verify household-status-alert visible; 10. Click session-action-btn; 11. Verify all action dropdown buttons visible and enabled: approve-session-btn, reject-session-btn, invite-applicant, trigger-pms-upload-btn, upload-document-btn, request-additional-btn, income-source-automation-dropdown-item; 12. Click view-details-btn; 13. Verify report-view-details-flags-section visible; 14. Close modal via close-event-history-modal; 15. Test all section headers toggle open/closed: identity-section-header, income-source-section-header, files-section-header, employment-section-header, financial-section-header, integration-logs-section-header; 16. For each header: click to open, verify arrow has -rotate-90 class, verify section content visible, click to close, verify arrow has rotate-90 class |
| heartbeat_addresses_menus.spec.js → Should check Address heartbeat | Validates address-menu navigation and verifies coming soon page display | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Click address-menu; 5. Wait 1 second; 6. Verify coming soon page displayed |
| heartbeat_applicant_inbox_menus.spec.js → Should check Applicant Inbox heartbeat | Critical heartbeat test validating all applicant inbox submenu filters and session card display | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if applicants-menu is expanded (has sidebar-item-open class); 5. Click applicants-menu if not expanded; 6. Check if applicants-submenu is active (has sidebar-active class); 7. If not active: click applicants-submenu and wait for GET /sessions response (filters should NOT include approval_status); 8. If already active: reload page and wait for GET /sessions response (filters should NOT include approval_status); 9. Verify all session cards visible for returned sessions (application-card with data-session attribute); 10. Click approval-status-submenu if visible and wait for GET /sessions response (filters check for error flags: $and → $has → flags → $and with ignored=$eq:0 and severity='ERROR'); 11. Verify all awaiting review session cards visible; 12. Click reviewed-submenu if visible and wait for GET /sessions response (filters should include "approved" and "conditionally_approved"); 13. Verify all reviewed session cards visible; 14. Click rejected-submenu if visible and wait for GET /sessions response (filters should include "rejected"); 15. Verify all rejected session cards visible |
| heartbeat_applications_menus.spec.js → Should check Applications menu heartbeat | Critical heartbeat test validating all applications menu submenus load data and display correctly | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if applications-menu is expanded (has sidebar-item-open class); 5. Click applications-menu if not expanded; 6. Check if applications-submenu is active (has sidebar-active class); 7. If not active: click applications-submenu and wait for GET /applications response; 8. If already active: reload page and wait for GET /applications response; 9. If applications.data.length > 0: verify each application row in application-table contains correct application name from API data; 10. Click portfolios-submenu if visible and wait for GET /portfolios response; 11. If portfolios.data.length > 0: verify each portfolio row contains correct portfolio data; 12. Click workflows-submenu if visible and wait for GET /workflows response; 13. If workflows.data.length > 0: verify each workflow row in workflow-table contains kebab-to-title-case converted workflow name; 14. Click affordable-templates-submenu if visible and wait for GET /eligibility-templates response; 15. If templates.data.length > 0: verify each template row in eligibility-template-table contains template name; 16. Click approval-conditions-submenu if visible and wait for GET /flag-collections response; 17. If approvalConditions.data.length > 0: verify each approval condition row in approval-conditions-table contains flag collection name |
| heartbeat_documents_menus.test.js → Should check Documents menu heartbeat | Critical heartbeat test validating documents menu navigation and document policies submenu | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if documents-menu is expanded (has sidebar-item-open class); 5. Click documents-menu if not expanded; 6. Check if documents-submenu is active (has sidebar-active class); 7. Click documents-submenu (coming soon page appears - no further validation); 8. Click document-policies-submenu if visible and wait for GET /document-policies response; 9. If documentPolicies.data.length > 0: verify each document policy row contains policy name from API data |
| heartbeat_income_source_menus.spec.js → Should check Income Sources menu heartbeat | Critical heartbeat test validating income source configuration submenu loads templates and displays correctly | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if incomesource-menu is expanded (has sidebar-item-open class); 5. Click incomesource-menu if not expanded; 6. Check if incomesource-configuration-submenu is active (has sidebar-active class); 7. Navigate to submenu via navigateToSubMenu helper (waits for API idle, clicks or reloads, waits for GET /income-source-templates request, waits for response); 8. If incomeSources.data.length > 0: verify table rows count matches API data count; 9. Create set of expected names from API for order-independent validation; 10. Loop through each UI row and verify row text contains at least one API name; 11. Verify all UI rows match API data (order-independent) |
| heartbeat_logout_menu.spec.js → Should check Logout flow heartbeat | Critical heartbeat test validating logout functionality and login page display | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Click logout-menu; 5. Verify 'Welcome' heading visible; 6. Verify 'Email Address' textbox visible; 7. Verify 'Password' textbox visible; 8. Verify admin-login-btn visible; 9. Reload page; 10. Verify 'Welcome' heading still visible; 11. Verify 'Email Address' textbox still visible; 12. Verify 'Password' textbox still visible; 13. Verify admin-login-btn still visible |
| heartbeat_org_list_menus.spec.js → Should check Organization List menu heartbeat | Critical heartbeat test validating organizations list menu loads and displays correctly | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if organizations-menu is active (has sidebar-active class); 5. Navigate to organizations-menu via navigateToSubMenu helper (waits for API idle, clicks or reloads, waits for GET /organizations request, waits for response); 6. Verify list content via verifyListContent helper (if organization.data.length > 0: loop through each organization and verify table row contains organization name) |
| heartbeat_organizations_menus.spec.js → Should check Organizations menu heartbeat | Critical heartbeat test validating organization self page and members submenu | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if organization-menu is expanded (has sidebar-item-open class); 5. Click organization-menu if not expanded; 6. Check if organization-self-submenu is active (has sidebar-active class); 7. If not active: click organization-self-submenu and wait for GET /organizations/self response; 8. If already active: reload page and wait for GET /organizations/self response; 9. If organization.data exists: verify heading with organization.data.name is defined; 10. Click members-submenu if visible and wait for GET /organizations/{id}/members response; 11. If members.data.length > 0: verify each member row in members-table contains user.full_name from API data |
| heartbeat_reports_menus.spec.js → Should check Report menu heartbeat | Critical heartbeat test validating all reports menu submenus load data correctly | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if reports-menu is expanded (has sidebar-item-open class); 5. Click reports-menu if not expanded; 6. Check if report-sessions-menu is active (has sidebar-active class); 7. Navigate to report-sessions-menu via navigateToSubMenu helper and wait for GET /sessions response; 8. Verify list content via verifyListContent (verify each row contains application.name from API); 9. Navigate to report-verifications-menu via navigateToSubMenu and wait for GET /verifications response; 10. Verify list content (verify each row contains verification type); 11. Navigate to report-files-menu via navigateToSubMenu and wait for GET /documents response; 12. Verify list content (verify each row contains type.name); 13. Navigate to report-income-sources-menu via navigateToSubMenu and wait for GET /income-sources response; 14. Verify list content (verify each row contains description) |
| heartbeat_settings_menus.spec.js → Should check Settings menu heartbeat | Critical heartbeat test validating settings menu submenus (account, devices, notifications, 2FA) | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if settings-menu is expanded (has sidebar-item-open class); 5. Click settings-menu if not expanded; 6. Click account-setting-submenu; 7. Navigate to devices-setting-submenu via navigateToSubMenu and wait for GET /devices response; 8. Verify list content via verifyListContent (verify each device row contains device name); 9. Click notification-setting-submenu (notification page not integrated - no validation); 10. Click 2fa-setting-submenu; 11. Verify 'Two-factor authentication' heading visible; 12. Verify 'Additional Password Protection' heading visible; 13. Verify 'Change Password' button visible |
| heartbeat_tools_menus.spec.js → Should check Tools menu heartbeat | Critical heartbeat test validating tools menu submenus (document tester, name tester, integrations, test setup) | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if tools-menu is expanded (has sidebar-item-open class); 5. Click tools-menu if not expanded; 6. Click document-tester-submenu; 7. Verify document-tester-heading is defined; 8. Verify 'Document Policy' text is defined; 9. Verify 'Upload Test File' text is defined; 10. Verify filepond drop label is defined; 11. Click name-tester-submenu; 12. Verify 'Name 1' text visible; 13. Verify 'Name 2' text visible; 14. Verify 'Submit' button visible; 15. Click integrations-submenu; 16. Verify 'New Customer' button visible; 17. Verify 'Sandbox Customers' button visible; 18. Click test-setup-submenu; 19. Verify 'Test Setup Page' heading visible |
| heartbeat_transactions_menus.spec.js → Should check Transactions menu heartbeat | Critical heartbeat test validating all transactions menu submenus load data correctly | 1. Navigate to home; 2. Admin login; 3. Verify household-status-alert visible; 4. Check if transactions-menu is expanded (has sidebar-item-open class); 5. Click transactions-menu if not expanded; 6. Check if transaction-tags-submenu is active (has sidebar-active class); 7. Navigate to transaction-tags-submenu via navigateToSubMenu helper and wait for GET /tags response; 8. Verify list content via verifyListContent (verify each row contains tag name); 9. Navigate to keyword-mapping-submenu via navigateToSubMenu and wait for GET /keywords response; 10. Verify list content (verify each row contains keyword); 11. Navigate to blacklists-submenu via navigateToSubMenu and wait for GET /income-source-blacklist-rules response; 12. Verify list content (verify each row contains provider.name); 13. Navigate to provider-mapping-submenu via navigateToSubMenu and wait for GET /categories response; 14. Verify list content (verify each row contains category name) |
| heartbeat_users_menu.spec.js → Should check User menu heartbeat | Critical heartbeat test validating users menu submenus load data correctly | 1. Admin login and navigate; 2. Check if users-menu is expanded (has sidebar-item-open class); 3. Click users-menu if not expanded; 4. Check if users-submenu is active (has sidebar-active class); 5. Navigate to users-submenu via navigateToSubMenu helper and wait for GET /users response; 6. Verify list content via verifyListContent (verify each row contains user email); 7. Verify roles-submenu visible; 8. Navigate to roles-submenu via navigateToSubMenu (isActive=false) and wait for GET /roles response; 9. Verify list content (verify each row contains role name); 10. Verify permissions-submenu visible; 11. Navigate to permissions-submenu via navigateToSubMenu (isActive=false) and wait for GET /permissions response; 12. Verify list content (verify each row contains permission display_name) |



